{"version":3,"file":"view360.min.js","sources":["webpack:///view360.min.js"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t(require(\"@egjs/component\"),require(\"@egjs/axes\")):\"function\"==typeof define&&define.amd?define(\"view360\",[\"@egjs/component\",\"@egjs/axes\"],t):\"object\"==typeof exports?exports.view360=t(require(\"@egjs/component\"),require(\"@egjs/axes\")):(e.eg=e.eg||{},e.eg.view360=t(e.eg.Component,e.eg.Axes))}(this,function(e,t){return function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.i=function(e){return e},__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e[\"default\"]}:function(){return e};return __webpack_require__.d(t,\"a\",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p=\"\",__webpack_require__(__webpack_require__.s=42)}([function(t,r){t.exports=e},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function quatToVec3(e){var t=a[\"default\"].fromValues(0,0,1);return a[\"default\"].transformQuat(t,t,e),t}function getRotationDelta(e,t,r){var n=a[\"default\"].fromValues(p[r].targetAxis[0],p[r].targetAxis[1],p[r].targetAxis[2]),o=p[r].meshPoint,s=l[\"default\"].clone(e),u=l[\"default\"].clone(t);l[\"default\"].normalize(s,s),l[\"default\"].normalize(u,u);var c=a[\"default\"].fromValues(0,0,1),h=a[\"default\"].fromValues(0,0,1);a[\"default\"].transformQuat(c,c,s),a[\"default\"].transformQuat(h,h,u),a[\"default\"].transformQuat(n,n,u);var f=a[\"default\"].dot(n,a[\"default\"].cross(a[\"default\"].create(),c,h)),d=f>0?1:-1,_=a[\"default\"].fromValues(o[0],o[1],o[2]),m=void 0;m=r!==p.YAW_DELTA_BY_YAW?a[\"default\"].fromValues(0,d,0):a[\"default\"].fromValues(d,0,0),a[\"default\"].transformQuat(_,_,u),a[\"default\"].transformQuat(m,m,u);var g=_,v=m,y=a[\"default\"].create();a[\"default\"].cross(y,g,v),a[\"default\"].normalize(y,y);var w=y[0],R=y[1],b=y[2];h=a[\"default\"].fromValues(o[0],o[1],o[2]),a[\"default\"].transformQuat(h,h,u),c=a[\"default\"].fromValues(o[0],o[1],o[2]),a[\"default\"].transformQuat(c,c,s);var E=Math.abs(c[0]*w+c[1]*R+c[2]*b),T=a[\"default\"].create();a[\"default\"].subtract(T,c,a[\"default\"].scale(a[\"default\"].create(),y,E));var C=(T[0]*h[0]+T[1]*h[1]+T[2]*h[2])/(a[\"default\"].length(T)*a[\"default\"].length(h));C>1&&(C=1);var x=Math.acos(C),P=a[\"default\"].cross(a[\"default\"].create(),h,T);E=w*P[0]+R*P[1]+b*P[2];var A=void 0;A=r!==p.YAW_DELTA_BY_YAW?E>0?1:-1:E<0?1:-1;var I=x*A*d;return i[\"default\"].toDegree(I)}t.__esModule=!0,t.ROTATE_CONSTANT=t.vec3=t.vec2=t.quat=t.mat4=t.glMatrix=t.util=undefined;var n=r(2),i=_interopRequireDefault(n),o=r(36),a=_interopRequireDefault(o),s=r(35),u=_interopRequireDefault(s),c=r(34),l=_interopRequireDefault(c),h=r(33),f=_interopRequireDefault(h),d={};d.isPowerOfTwo=function(e){return e&&0==(e&e-1)},d.extractPitchFromQuat=function(e){var t=quatToVec3(e);return-1*Math.atan2(t[1],Math.sqrt(Math.pow(t[0],2)+Math.pow(t[2],2)))};var p={PITCH_DELTA:1,YAW_DELTA_BY_ROLL:2,YAW_DELTA_BY_YAW:3};p[p.PITCH_DELTA]={targetAxis:[0,1,0],meshPoint:[0,0,1]},p[p.YAW_DELTA_BY_ROLL]={targetAxis:[0,1,0],meshPoint:[1,0,0]},p[p.YAW_DELTA_BY_YAW]={targetAxis:[1,0,0],meshPoint:[0,0,1]},d.getRotationDelta=getRotationDelta,t.util=d,t.glMatrix=i[\"default\"],t.mat4=f[\"default\"],t.quat=l[\"default\"],t.vec2=u[\"default\"],t.vec3=a[\"default\"],t.ROTATE_CONSTANT=p},function(e,t,r){\"use strict\";var n={};n.ARRAY_TYPE=\"undefined\"!=typeof Float32Array?Float32Array:Array;var i=Math.PI/180;n.toRadian=function(e){return e*i},n.toDegree=function(e){return e/i},n.EPSILON=1e-4,e.exports=n},function(e,t,r){(function(t,r){!function(t,r){e.exports=r()}(0,function(){\"use strict\";function objectOrFunction(e){var t=typeof e;return null!==e&&(\"object\"===t||\"function\"===t)}function isFunction(e){return\"function\"==typeof e}function setScheduler(e){a=e}function setAsap(e){s=e}function useVertxTimer(){return void 0!==o?function(){o(flush)}:useSetTimeout()}function useSetTimeout(){var e=setTimeout;return function(){return e(flush,1)}}function flush(){for(var e=0;e<i;e+=2){(0,d[e])(d[e+1]),d[e]=undefined,d[e+1]=undefined}i=0}function then(e,t){var r=this,n=new this.constructor(noop);n[_]===undefined&&makePromise(n);var i=r._state;if(i){var o=arguments[i-1];s(function(){return invokeCallback(i,n,o,r._result)})}else subscribe(r,n,e,t);return n}function resolve$1(e){var t=this;if(e&&\"object\"==typeof e&&e.constructor===t)return e;var r=new t(noop);return resolve(r,e),r}function noop(){}function selfFulfillment(){return new TypeError(\"You cannot resolve a promise with itself\")}function cannotReturnOwn(){return new TypeError(\"A promises callback cannot return that same promise.\")}function getThen(e){try{return e.then}catch(t){return y.error=t,y}}function tryThen(e,t,r,n){try{e.call(t,r,n)}catch(i){return i}}function handleForeignThenable(e,t,r){s(function(e){var n=!1,i=tryThen(r,t,function(r){n||(n=!0,t!==r?resolve(e,r):fulfill(e,r))},function(t){n||(n=!0,reject(e,t))},\"Settle: \"+(e._label||\" unknown promise\"));!n&&i&&(n=!0,reject(e,i))},e)}function handleOwnThenable(e,t){t._state===g?fulfill(e,t._result):t._state===v?reject(e,t._result):subscribe(t,undefined,function(t){return resolve(e,t)},function(t){return reject(e,t)})}function handleMaybeThenable(e,t,r){t.constructor===e.constructor&&r===then&&t.constructor.resolve===resolve$1?handleOwnThenable(e,t):r===y?(reject(e,y.error),y.error=null):r===undefined?fulfill(e,t):isFunction(r)?handleForeignThenable(e,t,r):fulfill(e,t)}function resolve(e,t){e===t?reject(e,selfFulfillment()):objectOrFunction(t)?handleMaybeThenable(e,t,getThen(t)):fulfill(e,t)}function publishRejection(e){e._onerror&&e._onerror(e._result),publish(e)}function fulfill(e,t){e._state===m&&(e._result=t,e._state=g,0!==e._subscribers.length&&s(publish,e))}function reject(e,t){e._state===m&&(e._state=v,e._result=t,s(publishRejection,e))}function subscribe(e,t,r,n){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+g]=r,i[o+v]=n,0===o&&e._state&&s(publish,e)}function publish(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)n=t[a],i=t[a+r],n?invokeCallback(r,n,i,o):i(o);e._subscribers.length=0}}function tryCatch(e,t){try{return e(t)}catch(r){return y.error=r,y}}function invokeCallback(e,t,r,n){var i=isFunction(r),o=void 0,a=void 0,s=void 0,u=void 0;if(i){if(o=tryCatch(r,n),o===y?(u=!0,a=o.error,o.error=null):s=!0,t===o)return void reject(t,cannotReturnOwn())}else o=n,s=!0;t._state!==m||(i&&s?resolve(t,o):u?reject(t,a):e===g?fulfill(t,o):e===v&&reject(t,o))}function initializePromise(e,t){try{t(function(t){resolve(e,t)},function(t){reject(e,t)})}catch(r){reject(e,r)}}function nextId(){return w++}function makePromise(e){e[_]=w++,e._state=undefined,e._result=undefined,e._subscribers=[]}function validationError(){return new Error(\"Array Methods must be provided an Array\")}function all(e){return new R(this,e).promise}function race(e){var t=this;return new t(n(e)?function(r,n){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(r,n)}:function(e,t){return t(new TypeError(\"You must pass an array to race.\"))})}function reject$1(e){var t=this,r=new t(noop);return reject(r,e),r}function needsResolver(){throw new TypeError(\"You must pass a resolver function as the first argument to the promise constructor\")}function needsNew(){throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\")}function polyfill(){var e=void 0;if(void 0!==r)e=r;else if(\"undefined\"!=typeof self)e=self;else try{e=Function(\"return this\")()}catch(i){throw new Error(\"polyfill failed because global object is unavailable in this environment\")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(i){}if(\"[object Promise]\"===n&&!t.cast)return}e.Promise=b}var e=void 0;e=Array.isArray?Array.isArray:function(e){return\"[object Array]\"===Object.prototype.toString.call(e)};var n=e,i=0,o=void 0,a=void 0,s=function(e,t){d[i]=e,d[i+1]=t,2===(i+=2)&&(a?a(flush):p())},u=\"undefined\"!=typeof window?window:undefined,c=u||{},l=c.MutationObserver||c.WebKitMutationObserver,h=\"undefined\"==typeof self&&void 0!==t&&\"[object process]\"==={}.toString.call(t),f=\"undefined\"!=typeof Uint8ClampedArray&&\"undefined\"!=typeof importScripts&&\"undefined\"!=typeof MessageChannel,d=new Array(1e3),p=void 0;p=h?function(){return function(){return t.nextTick(flush)}}():l?function(){var e=0,t=new l(flush),r=document.createTextNode(\"\");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}():f?function(){var e=new MessageChannel;return e.port1.onmessage=flush,function(){return e.port2.postMessage(0)}}():u===undefined?function(){try{var e=Function(\"return this\")().require(\"vertx\");return o=e.runOnLoop||e.runOnContext,useVertxTimer()}catch(t){return useSetTimeout()}}():useSetTimeout();var _=Math.random().toString(36).substring(2),m=void 0,g=1,v=2,y={error:null},w=0,R=function(){function Enumerator(e,t){this._instanceConstructor=e,this.promise=new e(noop),this.promise[_]||makePromise(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?fulfill(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&fulfill(this.promise,this._result))):reject(this.promise,validationError())}return Enumerator.prototype._enumerate=function(e){for(var t=0;this._state===m&&t<e.length;t++)this._eachEntry(e[t],t)},Enumerator.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===resolve$1){var i=getThen(e);if(i===then&&e._state!==m)this._settledAt(e._state,t,e._result);else if(\"function\"!=typeof i)this._remaining--,this._result[t]=e;else if(r===b){var o=new r(noop);handleMaybeThenable(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},Enumerator.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===m&&(this._remaining--,e===v?reject(n,r):this._result[t]=r),0===this._remaining&&fulfill(n,this._result)},Enumerator.prototype._willSettleAt=function(e,t){var r=this;subscribe(e,undefined,function(e){return r._settledAt(g,t,e)},function(e){return r._settledAt(v,t,e)})},Enumerator}(),b=function(){function Promise(e){this[_]=nextId(),this._result=this._state=undefined,this._subscribers=[],noop!==e&&(\"function\"!=typeof e&&needsResolver(),this instanceof Promise?initializePromise(this,e):needsNew())}return Promise.prototype[\"catch\"]=function(e){return this.then(null,e)},Promise.prototype[\"finally\"]=function(e){var t=this,r=t.constructor;return t.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})})},Promise}();return b.prototype.then=then,b.all=all,b.race=race,b.resolve=resolve$1,b.reject=reject$1,b._setScheduler=setScheduler,b._setAsap=setAsap,b._asap=s,b.polyfill=polyfill,b.Promise=b,b})}).call(t,r(37),r(38))},function(e,t){var r=window.MathUtil||{};r.degToRad=Math.PI/180,r.radToDeg=180/Math.PI,r.Vector2=function(e,t){this.x=e||0,this.y=t||0},r.Vector2.prototype={constructor:r.Vector2,set:function(e,t){return this.x=e,this.y=t,this},copy:function(e){return this.x=e.x,this.y=e.y,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},r.Vector3=function(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0},r.Vector3.prototype={constructor:r.Vector3,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(0!==e){var t=1/e;this.multiplyScalar(t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,i=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*n-a*r,c=s*r+a*t-i*n,l=s*n+i*r-o*t,h=-i*t-o*r-a*n;return this.x=u*s+h*-i+c*-a-l*-o,this.y=c*s+h*-o+l*-i-u*-a,this.z=l*s+h*-a+u*-o-c*-i,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=n*s-i*a,this.y=i*o-r*s,this.z=r*a-n*o,this}},r.Quaternion=function(e,t,r,n){this.x=e||0,this.y=t||0,this.z=r||0,this.w=n!==undefined?n:1},r.Quaternion.prototype={constructor:r.Quaternion,set:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,r){var n=Math.cos(e/2),i=Math.cos(t/2),o=Math.cos(r/2),a=Math.sin(e/2),s=Math.sin(t/2),u=Math.sin(r/2);return this.x=a*i*o+n*s*u,this.y=n*s*o-a*i*u,this.z=n*i*u+a*s*o,this.w=n*i*o-a*s*u,this},setFromEulerYXZ:function(e,t,r){var n=Math.cos(e/2),i=Math.cos(t/2),o=Math.cos(r/2),a=Math.sin(e/2),s=Math.sin(t/2),u=Math.sin(r/2);return this.x=a*i*o+n*s*u,this.y=n*s*o-a*i*u,this.z=n*i*u-a*s*o,this.w=n*i*o+a*s*u,this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(r),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var r=e.x,n=e.y,i=e.z,o=e.w,a=t.x,s=t.y,u=t.z,c=t.w;return this.x=r*c+o*a+n*u-i*s,this.y=n*c+o*s+i*a-r*u,this.z=i*c+o*u+r*s-n*a,this.w=o*c-r*a-n*s-i*u,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this.x,n=this.y,i=this.z,o=this.w,a=o*e.w+r*e.x+n*e.y+i*e.z;if(a<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,a=-a):this.copy(e),a>=1)return this.w=o,this.x=r,this.y=n,this.z=i,this;var s=Math.acos(a),u=Math.sqrt(1-a*a);if(Math.abs(u)<.001)return this.w=.5*(o+this.w),this.x=.5*(r+this.x),this.y=.5*(n+this.y),this.z=.5*(i+this.z),this;var c=Math.sin((1-t)*s)/u,l=Math.sin(t*s)/u;return this.w=o*c+this.w*l,this.x=r*c+this.x*l,this.y=n*c+this.y*l,this.z=i*c+this.z*l,this},setFromUnitVectors:function(){var e,t;return function(n,i){return e===undefined&&(e=new r.Vector3),t=n.dot(i)+1,t<1e-6?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,i),this.x=e.x,this.y=e.y,this.z=e.z,this.w=t,this.normalize(),this}}()},e.exports=r},function(e,t,r){\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(8),o=function(e){return e&&e.__esModule?e:{\"default\":e}}(i),a={0:\"NO_ERROR\",1280:\"INVALID_ENUM\",1281:\"INVALID_VALUE\",1282:\"INVALID_OPERATION\",1285:\"OUT_OF_MEMORY\",1286:\"INVALID_FRAMEBUFFER_OPERATION\",37442:\"CONTEXT_LOST_WEBGL\"},s=null,u=function(){function WebGLUtils(){_classCallCheck(this,WebGLUtils)}return WebGLUtils.createShader=function(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(e.deleteShader(n),null)},WebGLUtils.createProgram=function(e,t,r){var n=e.createProgram();return e.attachShader(n,t),e.attachShader(n,r),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS)?n:(e.deleteProgram(n),null)},WebGLUtils.initBuffer=function(e,t,r,n,i){var o=e.createBuffer();return e.bindBuffer(t,o),e.bufferData(t,r,e.STATIC_DRAW),o&&(o.itemSize=n,o.numItems=r.length/n),i!==undefined&&(e.enableVertexAttribArray(i),e.vertexAttribPointer(i,o.itemSize,e.FLOAT,!1,0,0)),o},WebGLUtils.bindBufferToAttribute=function(e,t,r){null!==t&&null!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t),e.vertexAttribPointer(r,t.itemSize,e.FLOAT,!1,0,0))},WebGLUtils.getWebglContext=function(e,t){function onWebglcontextcreationerror(e){return e.statusMessage}var r=[\"webgl\",\"experimental-webgl\",\"webkit-3d\",\"moz-webgl\"],i=null,o=n({preserveDrawingBuffer:!1,antialias:!1},t);e.addEventListener(\"webglcontextcreationerror\",onWebglcontextcreationerror);for(var a=0;a<r.length;a++){try{i=e.getContext(r[a],o)}catch(s){}if(i)break}return e.removeEventListener(\"webglcontextcreationerror\",onWebglcontextcreationerror),i},WebGLUtils.createTexture=function(e,t){var r=e.createTexture();return e.bindTexture(t,r),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(t,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(t,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(t,null),r},WebGLUtils.isWebGLAvailable=function(){if(null===s){var e=document.createElement(\"canvas\"),t=WebGLUtils.getWebglContext(e);if(s=!!t,t){var r=t.getExtension(\"WEBGL_lose_context\");r&&r.loseContext()}}return s},WebGLUtils.isStableWebGL=function(){var e=(0,o[\"default\"])(),t=!0;return\"android\"===e.os.name&&parseFloat(e.os.version)<=4.3?t=!1:\"android\"===e.os.name&&4.4===parseFloat(e.os.version)&&\"chrome\"!==e.browser.name&&(t=!1),t},WebGLUtils.getErrorNameFromWebGLErrorCode=function(e){return e in a?a[e]:\"UNKNOWN_ERROR\"},WebGLUtils}();t[\"default\"]=u},function(e,t,r){\"use strict\";t.__esModule=!0;var n=\"undefined\"!=typeof window&&window.Math===Math?window:\"undefined\"!=typeof self&&self.Math===Math?self:Function(\"return this\")();n.Float32Array=\"undefined\"!=typeof n.Float32Array?n.Float32Array:n.Array,t.window=n;t.document=n.document,t.Float32Array=n.Float32Array,t.getComputedStyle=n.getComputedStyle,t.userAgent=n.navigator.userAgent,t.SUPPORT_TOUCH=\"ontouchstart\"in n,t.SUPPORT_DEVICEMOTION=\"ondevicemotion\"in n},function(e,t,r){\"use strict\";t.__esModule=!0;var n=[.2,.2],i={LEFT_ARROW:37,A:65,UP_ARROW:38,W:87,RIGHT_ARROW:39,D:68,DOWN_ARROW:40,S:83},o={NONE:\"none\",YAWPITCH:\"yawPitch\"};t.GYRO_MODE=o,t.CONTROL_MODE_VR=1,t.CONTROL_MODE_YAWPITCH=2,t.TOUCH_DIRECTION_NONE=1,t.TOUCH_DIRECTION_YAW=2,t.TOUCH_DIRECTION_PITCH=4,t.TOUCH_DIRECTION_ALL=6,t.MC_DECELERATION=.0014,t.MC_MAXIMUM_DURATION=1e3,t.MC_BIND_SCALE=n,t.MIN_FIELD_OF_VIEW=20,t.MAX_FIELD_OF_VIEW=110,t.PAN_SCALE=320,t.DELTA_THRESHOLD=.0375,t.YAW_RANGE_HALF=180,t.PITCH_RANGE_HALF=90,t.PINCH_EVENTS=\"pinchstart pinchmove pinchend\",t.KEYMAP=i},function(e,t,r){!function(t,r){e.exports=r()}(0,function(){return function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e[\"default\"]}:function(){return e};return __webpack_require__.d(t,\"a\",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p=\"\",__webpack_require__(__webpack_require__.s=0)}([function(e,t,r){\"use strict\";var n=r(1),i=function(e){return e&&e.__esModule?e:{\"default\":e}}(n);e.exports=i[\"default\"]},function(e,t,r){\"use strict\";function agent(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:n.navigator.userAgent;o[\"default\"].setUa(e);var t={os:o[\"default\"].getOs(),browser:o[\"default\"].getBrowser(),isMobile:o[\"default\"].getIsMobile()};return t.browser.name=t.browser.name.toLowerCase(),t.os.name=t.os.name.toLowerCase(),t.os.version=t.os.version.toLowerCase(),\"ios\"===t.os.name&&t.browser.webview&&(t.browser.version=\"-1\"),t}t.__esModule=!0;var n=r(2),i=r(3),o=function(e){return e&&e.__esModule?e:{\"default\":e}}(i);agent.VERSION=\"2.1.2\",t[\"default\"]=agent,e.exports=t[\"default\"]},function(e,t,r){\"use strict\";t.__esModule=!0;var n=\"undefined\"!=typeof window&&window||{};t.RegExp=n.RegExp,t.navigator=n.navigator},function(e,t,r){\"use strict\";function setUa(e){o=e}function isMatched(e,t){return t&&t.test?!!t.test(e):e.indexOf(t)>-1}function getIdentityStringFromArray(e,t){var r=e.filter(function(e){return isMatched(o,e.criteria)})[0];return r&&r.identity||t.name}function getRule(e,t){return e.filter(function(e){var r=e.criteria,n=new RegExp(e.identity,\"i\").test(t);return!!(r?n&&isMatched(o,r):n)})[0]}function getBrowserName(){return getIdentityStringFromArray(i[\"default\"].browser,i[\"default\"].defaultString.browser)}function getBrowserRule(e){var t=getRule(i[\"default\"].browser,e);return t||(t={criteria:e,versionSearch:e,identity:e}),t}function extractBrowserVersion(e,t){var r=i[\"default\"].defaultString.browser.version,n=new RegExp(\"(\"+e+\")\",\"i\").exec(t);if(!n)return r;var o=n.index,a=n[0];if(o>-1){var s=o+a.length+1;r=t.substring(s).split(\" \")[0].replace(/_/g,\".\").replace(/;|\\)/g,\"\")}return r}function getBrowserVersion(e){return e?extractBrowserVersion(getBrowserRule(e).versionSearch||e,o):undefined}function isWebview(){var e=i[\"default\"].webview,t=void 0;return e.filter(function(e){return isMatched(o,e.criteria)}).some(function(e){return t=extractBrowserVersion(e.browserVersionSearch,o),!(!isMatched(o,e.webviewToken)&&!isMatched(t,e.webviewBrowserVersion))})}function getOSRule(e){return getRule(i[\"default\"].os,e)}function getOsName(){return getIdentityStringFromArray(i[\"default\"].os,i[\"default\"].defaultString.os)}function getOsVersion(e){var t=getOSRule(e)||{},r=i[\"default\"].defaultString.os.version,n=void 0;if(!e)return undefined;if(t.versionAlias)return t.versionAlias;var a=t.versionSearch||e,s=new RegExp(\"(\"+a+\")\\\\s([\\\\d_\\\\.]+|\\\\d_0)\",\"i\");return s.exec(o)&&(n=s.exec(o)[2].replace(/_/g,\".\").replace(/;|\\)/g,\"\")),n||r}function getOs(){var e=getOsName();return{name:e,version:getOsVersion(e)}}function getBrowser(){var e=getBrowserName();return{name:e,version:getBrowserVersion(e),webview:isWebview()}}function getIsMobile(){return-1!==o.indexOf(\"Mobi\")}t.__esModule=!0;var n=r(4),i=function(e){return e&&e.__esModule?e:{\"default\":e}}(n),o=void 0;t[\"default\"]={getOs:getOs,getBrowser:getBrowser,getIsMobile:getIsMobile,setUa:setUa},e.exports=t[\"default\"]},function(e,t,r){\"use strict\";t.__esModule=!0;var n={browser:[{criteria:\"PhantomJS\",identity:\"PhantomJS\"},{criteria:/Whale/,identity:\"Whale\",versionSearch:\"Whale\"},{criteria:/Edge/,identity:\"Edge\",versionSearch:\"Edge\"},{criteria:/MSIE|Trident|Windows Phone/,identity:\"IE\",versionSearch:\"IEMobile|MSIE|rv\"},{criteria:/MiuiBrowser/,identity:\"MIUI Browser\",versionSearch:\"MiuiBrowser\"},{criteria:/SamsungBrowser/,identity:\"Samsung Internet\",versionSearch:\"SamsungBrowser\"},{criteria:/SAMSUNG /,identity:\"Samsung Internet\",versionSearch:\"Version\"},{criteria:/Chrome|CriOS/,identity:\"Chrome\"},{criteria:/Android/,identity:\"Android Browser\",versionSearch:\"Version\"},{criteria:/iPhone|iPad/,identity:\"Safari\",versionSearch:\"Version\"},{criteria:\"Apple\",identity:\"Safari\",versionSearch:\"Version\"},{criteria:\"Firefox\",identity:\"Firefox\"}],os:[{criteria:/Windows Phone/,identity:\"Windows Phone\",versionSearch:\"Windows Phone\"},{criteria:\"Windows 2000\",identity:\"Window\",versionAlias:\"5.0\"},{criteria:/Windows NT/,identity:\"Window\",versionSearch:\"Windows NT\"},{criteria:/iPhone|iPad/,identity:\"iOS\",versionSearch:\"iPhone OS|CPU OS\"},{criteria:\"Mac\",versionSearch:\"OS X\",identity:\"MAC\"},{criteria:/Android/,identity:\"Android\"},{criteria:/Tizen/,identity:\"Tizen\"},{criteria:/Web0S/,identity:\"WebOS\"}],webview:[{criteria:/iPhone|iPad/,browserVersionSearch:\"Version\",webviewBrowserVersion:/-1/},{criteria:/iPhone|iPad|Android/,webviewToken:/NAVER|DAUM|; wv/}],defaultString:{browser:{version:\"-1\",name:\"unknown\"},os:{version:\"-1\",name:\"unknown\"}}};t[\"default\"]=n,e.exports=t[\"default\"]}])})},function(e,t){var r=window.Util||{};r.MIN_TIMESTEP=.001,r.MAX_TIMESTEP=1,r.base64=function(e,t){return\"data:\"+e+\";base64,\"+t},r.clamp=function(e,t,r){return Math.min(Math.max(t,e),r)},r.lerp=function(e,t,r){return e+(t-e)*r},r.race=function(e){return Promise.race?Promise.race(e):new Promise(function(t,r){for(var n=0;n<e.length;n++)e[n].then(t,r)})},r.isIOS=function(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return e}}(),r.isWebViewAndroid=function(){var e=-1!==navigator.userAgent.indexOf(\"Version\")&&-1!==navigator.userAgent.indexOf(\"Android\")&&-1!==navigator.userAgent.indexOf(\"Chrome\");return function(){return e}}(),r.isSafari=function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return e}}(),r.isFirefoxAndroid=function(){var e=-1!==navigator.userAgent.indexOf(\"Firefox\")&&-1!==navigator.userAgent.indexOf(\"Android\");return function(){return e}}(),r.isR7=function(){var e=-1!==navigator.userAgent.indexOf(\"R7 Build\");return function(){return e}}(),r.isLandscapeMode=function(){var e=90==window.orientation||-90==window.orientation;return r.isR7()?!e:e},r.isTimestampDeltaValid=function(e){return!isNaN(e)&&(!(e<=r.MIN_TIMESTEP)&&!(e>r.MAX_TIMESTEP))},r.getScreenWidth=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},r.getScreenHeight=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},r.requestFullscreen=function(e){if(r.isWebViewAndroid())return!1;if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0},r.exitFullscreen=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},r.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},r.linkProgram=function(e,t,r,n){var i=e.createShader(e.VERTEX_SHADER);e.shaderSource(i,t),e.compileShader(i);var o=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(o,r),e.compileShader(o);var a=e.createProgram();e.attachShader(a,i),e.attachShader(a,o);for(var s in n)e.bindAttribLocation(a,n[s],s);return e.linkProgram(a),e.deleteShader(i),e.deleteShader(o),a},r.getProgramUniforms=function(e,t){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=\"\",o=0;o<n;o++){i=e.getActiveUniform(t,o).name.replace(\"[0]\",\"\"),r[i]=e.getUniformLocation(t,i)}return r},r.orthoMatrix=function(e,t,r,n,i,o,a){var s=1/(t-r),u=1/(n-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*u,e[14]=(a+o)*c,e[15]=1,e},r.copyArray=function(e,t){for(var r=0,n=e.length;r<n;r++)t[r]=e[r]},r.isMobile=function(){var e=!1;return function(t){(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},r.extend=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},r.safariCssSizeWorkaround=function(e){if(r.isIOS()){var t=e.style.width,n=e.style.height;e.style.width=parseInt(t)+1+\"px\",e.style.height=parseInt(n)+\"px\",setTimeout(function(){e.style.width=t,e.style.height=n},100)}window.Util=r,window.canvas=e},r.isDebug=function(){return r.getQueryParameter(\"debug\")},r.getQueryParameter=function(e){var e=e.replace(/[\\[]/,\"\\\\[\").replace(/[\\]]/,\"\\\\]\"),t=new RegExp(\"[\\\\?&]\"+e+\"=([^&#]*)\"),r=t.exec(location.search);return null===r?\"\":decodeURIComponent(r[1].replace(/\\+/g,\" \"))},r.frameDataFromPose=function(){function mat4_perspectiveFromFieldOfView(r,n,i,o){var a=Math.tan(n?n.upDegrees*e:t),s=Math.tan(n?n.downDegrees*e:t),u=Math.tan(n?n.leftDegrees*e:t),c=Math.tan(n?n.rightDegrees*e:t),l=2/(u+c),h=2/(a+s);return r[0]=l,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=h,r[6]=0,r[7]=0,r[8]=-(u-c)*l*.5,r[9]=(a-s)*h*.5,r[10]=o/(i-o),r[11]=-1,r[12]=0,r[13]=0,r[14]=o*i/(i-o),r[15]=0,r}function mat4_fromRotationTranslation(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=n+n,u=i+i,c=o+o,l=n*s,h=n*u,f=n*c,d=i*u,p=i*c,_=o*c,m=a*s,g=a*u,v=a*c;return e[0]=1-(d+_),e[1]=h+v,e[2]=f-g,e[3]=0,e[4]=h-v,e[5]=1-(l+_),e[6]=p+m,e[7]=0,e[8]=f+g,e[9]=p-m,e[10]=1-(l+d),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function mat4_translate(e,t,r){var n,i,o,a,s,u,c,l,h,f,d,p,_=r[0],m=r[1],g=r[2];return t===e?(e[12]=t[0]*_+t[4]*m+t[8]*g+t[12],e[13]=t[1]*_+t[5]*m+t[9]*g+t[13],e[14]=t[2]*_+t[6]*m+t[10]*g+t[14],e[15]=t[3]*_+t[7]*m+t[11]*g+t[15]):(n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=t[9],d=t[10],p=t[11],e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=h,e[9]=f,e[10]=d,e[11]=p,e[12]=n*_+s*m+h*g+t[12],e[13]=i*_+u*m+f*g+t[13],e[14]=o*_+c*m+d*g+t[14],e[15]=a*_+l*m+p*g+t[15]),e}function mat4_invert(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],h=t[9],f=t[10],d=t[11],p=t[12],_=t[13],m=t[14],g=t[15],v=r*s-n*a,y=r*u-i*a,w=r*c-o*a,R=n*u-i*s,b=n*c-o*s,E=i*c-o*u,T=l*_-h*p,C=l*m-f*p,x=l*g-d*p,P=h*m-f*_,A=h*g-d*_,I=f*g-d*m,S=v*I-y*A+w*P+R*x-b*C+E*T;return S?(S=1/S,e[0]=(s*I-u*A+c*P)*S,e[1]=(i*A-n*I-o*P)*S,e[2]=(_*E-m*b+g*R)*S,e[3]=(f*b-h*E-d*R)*S,e[4]=(u*x-a*I-c*C)*S,e[5]=(r*I-i*x+o*C)*S,e[6]=(m*w-p*E-g*y)*S,e[7]=(l*E-f*w+d*y)*S,e[8]=(a*A-s*x+c*T)*S,e[9]=(n*x-r*A-o*T)*S,e[10]=(p*b-_*w+g*v)*S,e[11]=(h*w-l*b-d*v)*S,e[12]=(s*C-a*P-u*T)*S,e[13]=(r*P-n*C+i*T)*S,e[14]=(_*y-p*R-m*v)*S,e[15]=(l*R-h*y+f*v)*S,e):null}function updateEyeMatrices(e,t,i,o,a){mat4_perspectiveFromFieldOfView(e,o?o.fieldOfView:null,a.depthNear,a.depthFar),mat4_fromRotationTranslation(t,i.orientation||r,i.position||n),o&&mat4_translate(t,t,o.offset),mat4_invert(t,t)}var e=Math.PI/180,t=.25*Math.PI,r=new Float32Array([0,0,0,1]),n=new Float32Array([0,0,0]);return function(e,t,r){return!(!e||!t)&&(e.pose=t,e.timestamp=t.timestamp,updateEyeMatrices(e.leftProjectionMatrix,e.leftViewMatrix,t,r.getEyeParameters(\"left\"),r),updateEyeMatrices(e.rightProjectionMatrix,e.rightViewMatrix,t,r.getEyeParameters(\"right\"),r),!0)}}(),r.isInsideCrossDomainIFrame=function(){var e=window.self!==window.top,t=r.getDomainFromUrl(document.referrer),n=r.getDomainFromUrl(window.location.href);return e&&t!==n},r.getDomainFromUrl=function(e){var t;return t=e.indexOf(\"://\")>-1?e.split(\"/\")[2]:e.split(\"/\")[0],t=t.split(\":\")[0]},e.exports=r},function(e,r){e.exports=t},function(e,t,r){\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(0),i=function(e){return e&&e.__esModule?e:{\"default\":e}}(n),o=function(e){function SpriteImage(t,r){_classCallCheck(this,SpriteImage);var n=_possibleConstructorReturn(this,e.call(this)),i=r||{};return n._el=t,n._rowCount=i.rowCount||1,n._colCount=i.colCount||1,n._totalCount=n._rowCount*n._colCount,n._width=i.width||\"auto\",n._height=i.height||\"auto\",n._autoHeight=null!=i.autoHeight?i.autoHeight:\"true\",n._colRow=[0,0],i.colRow?n._colRow=i.colRow:i.frameIndex&&n.setFrameIndex(i.frameIndex),n._el.style.width=SpriteImage._getSizeString(n._width),n._el.style.height=SpriteImage._getSizeString(n._height),i.imageUrl?(n._image=new Image,n._image.onload=function(){n._bg=SpriteImage._createBgDiv(n._image,n._rowCount,n._colCount,n._autoHeight),n._el.appendChild(n._bg),n.setColRow(n._colRow[0],n._colRow[1]),n.trigger(\"load\",{target:n._el,bgElement:n._bg}),n._autoPlayReservedInfo&&(n.play(n._autoPlayReservedInfo),n._autoPlayReservedInfo=null)},n._image.onerror=function(e){n.trigger(\"imageError\",{imageUrl:i.imageUrl})},n._image.src=i.imageUrl,n):(setTimeout(function(){n.trigger(\"imageError\",{imageUrl:i.imageUrl})},0),_possibleConstructorReturn(n))}return _inherits(SpriteImage,e),SpriteImage._createBgDiv=function(e,t,r,n){var i=document.createElement(\"div\");i.style.backgroundImage=\"url(\"+e.src+\")\",i.style.backgroundSize=100*r+\"% \"+100*t+\"%\";var o=e.width/r,a=e.height/t;if(n){var s=a/o;i.style.paddingBottom=100*s+\"%\"}else i.style.height=\"100%\";return i},SpriteImage.prototype.setFrameIndex=function(e){var t=this.toColRow(e);this.setColRow(t[0],t[1])},SpriteImage.prototype.getFrameIndex=function(){return this._colRow[1]*this._colCount+this._colRow[0]},SpriteImage.prototype.setColRow=function(e,t){t>this._rowCount-1||e>this._colCount-1||(this._bg&&(this._bg.style.backgroundPosition=100*-e+\"% \"+100*-t+\"%\"),this._colRow=[e,t])},SpriteImage.prototype.getColRow=function(){return this._colRow},SpriteImage._getSizeString=function(e){return\"number\"==typeof e?e+\"px\":e},SpriteImage.prototype.stop=function(){this._autoPlayTimer&&(clearInterval(this._autoPlayTimer),this._autoPlayTimer=null)},SpriteImage.prototype.play=function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{interval:1e3/this._totalCount,playCount:0},r=t.interval,n=t.playCount;if(!this._bg)return void(this._autoPlayReservedInfo={interval:r,playCount:n});this._autoPlayTimer&&(clearInterval(this._autoPlayTimer),this._autoPlayTimer=null);var i=this.getFrameIndex(),o=0,a=0;this._autoPlayTimer=setInterval(function(){i%=e._totalCount;var t=e.toColRow(i);e.setColRow(t[0],t[1]),i++,++a===e._totalCount&&(a=0,o++),n>0&&o===n&&clearInterval(e._autoPlayTimer)},r)},SpriteImage.prototype.toColRow=function(e){var t=this._colCount,r=this._rowCount;return e<0?[0,0]:e>=this._totalCount?[t-1,r-1]:[e%t,Math.floor(e/t)]},SpriteImage}(i[\"default\"]);t[\"default\"]=o},function(e,t,r){\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}t.__esModule=!0;var n=function Renderer(){_classCallCheck(this,Renderer)};t[\"default\"]=n},function(e,t,r){\"use strict\";var n=r(7),i={INVALID_DEVICE:10,NO_WEBGL:11,FAIL_IMAGE_LOAD:12,FAIL_BIND_TEXTURE:13,INVALID_RESOURCE:14,RENDERING_CONTEXT_LOST:15},o={READY:\"ready\",VIEW_CHANGE:\"viewChange\",ANIMATION_END:\"animationEnd\",ERROR:\"error\",CONTENT_LOADED:\"contentLoaded\"},a={EQUIRECTANGULAR:\"equirectangular\",CUBEMAP:\"cubemap\"};e.exports={GYRO_MODE:n.GYRO_MODE,EVENTS:o,ERROR_TYPE:i,PROJECTION_TYPE:a}},function(e,t,r){\"use strict\";function toAxis(e,t){return t.reduce(function(t,r,n){return e[n]&&(t[e[n]]=r),t},{})}t.__esModule=!0;var n={};n.toAxis=toAxis,t[\"default\"]=n,t.toAxis=toAxis},function(e,t,r){\"use strict\";t.__esModule=!0,t.YawPitchControl=undefined;var n=r(27),i=function(e){return e&&e.__esModule?e:{\"default\":e}}(n),o=r(7);i[\"default\"].CONTROL_MODE_VR=o.CONTROL_MODE_VR,i[\"default\"].CONTROL_MODE_YAWPITCH=o.CONTROL_MODE_YAWPITCH,i[\"default\"].TOUCH_DIRECTION_ALL=o.TOUCH_DIRECTION_ALL,i[\"default\"].TOUCH_DIRECTION_YAW=o.TOUCH_DIRECTION_YAW,i[\"default\"].TOUCH_DIRECTION_PITCH=o.TOUCH_DIRECTION_PITCH,i[\"default\"].TOUCH_DIRECTION_NONE=o.TOUCH_DIRECTION_NONE,t.YawPitchControl=i[\"default\"]},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(0),o=_interopRequireDefault(i),a=r(15),s=r(24),u=r(5),c=_interopRequireDefault(u),l=r(13),h=r(1),f=\"undefined\"==typeof Promise?r(3).Promise:Promise,d=function(e){function PanoViewer(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,PanoViewer);var i=_possibleConstructorReturn(this,e.call(this));if(!c[\"default\"].isWebGLAvailable()){var o;return setTimeout(function(){i.trigger(l.EVENTS.ERROR,{type:l.ERROR_TYPE.NO_WEBGL,message:\"no webgl support\"})},0),o=i,_possibleConstructorReturn(i,o)}if(!c[\"default\"].isStableWebGL()){var a;return setTimeout(function(){i.trigger(l.EVENTS.ERROR,{type:l.ERROR_TYPE.INVALID_DEVICE,message:\"blacklisted browser\"})},0),a=i,_possibleConstructorReturn(i,a)}if(r.image&&r.video){var s;return setTimeout(function(){i.trigger(l.EVENTS.ERROR,{type:l.ERROR_TYPE.INVALID_RESOURCE,message:\"Specifying multi resouces(both image and video) is not valid.\"})},0),s=i,_possibleConstructorReturn(i,s)}i._container=t,i._image=r.image||r.video,i._isVideo=!!r.video,i._projectionType=r.projectionType||l.PROJECTION_TYPE.EQUIRECTANGULAR,i._cubemapConfig=n({order:\"RLUDBF\",tileConfig:{flipHirozontal:!1,rotation:0}},r.cubemapConfig),i._width=r.width||parseInt(window.getComputedStyle(t).width,10),i._height=r.height||parseInt(window.getComputedStyle(t).height,10),i._yaw=r.yaw||0,i._pitch=r.pitch||0,i._fov=r.fov||65,i._useGyro=r.useGyro||l.GYRO_MODE.YAWPITCH,i._aspectRatio=i._width/i._height;var u=r.fovRange||[30,110],h=n(r,{element:t,yaw:i._yaw,pitch:i._pitch,fov:i._fov,useGyro:i._useGyro,fovRange:u,aspectRatio:i._aspectRatio});return i._isReady=!1,i._initYawPitchControl(h),i._initRenderer(i._yaw,i._pitch,i._fov,i._projectionType,i._cubemapConfig),i}return _inherits(PanoViewer,e),PanoViewer.prototype.getVideo=function(){return this._isVideo?this._photoSphereRenderer.getContent():null},PanoViewer.prototype.setVideo=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return e?(this.setImage(e,{projectionType:t.projectionType,isVideo:!0,cubemapConfig:t.cubemapConfig}),this):this},PanoViewer.prototype.getImage=function(){return this._isVideo?null:this._photoSphereRenderer.getContent()},PanoViewer.prototype.setImage=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=n({order:\"RLUDBF\",tileConfig:{flipHirozontal:!1,rotation:0}},t.cubemapConfig),i=!!t.isVideo;return this._image&&this._isVideo!==i?(console.warn(\"Currently not supporting to change content type(Image <--\\x3e Video)\"),this):e?(this._image=e,this._isVideo=i,this._projectionType=t.projectionType||l.PROJECTION_TYPE.EQUIRECTANGULAR,this._cubemapConfig=r,this._deactivate(),this._initRenderer(this._yaw,this._pitch,this._fov,this._projectionType,this._cubemapConfig),this):this},PanoViewer.prototype.keepUpdate=function(e){return this._photoSphereRenderer.keepUpdate(e),this},PanoViewer.prototype.getProjectionType=function(){return this._projectionType},PanoViewer.prototype._initRenderer=function(e,t,r,n,i){var o=this;this._photoSphereRenderer=new s.PanoImageRenderer(this._image,this._width,this._height,this._isVideo,{initialYaw:e,initialPitch:t,fieldOfView:r,imageType:n,cubemapConfig:i}),this._bindRendererHandler(),this._photoSphereRenderer.bindTexture().then(function(){return o._activate()})[\"catch\"](function(){o._triggerEvent(l.EVENTS.ERROR,{type:l.ERROR_TYPE.FAIL_BIND_TEXTURE,message:\"failed to bind texture\"})})},PanoViewer.prototype._bindRendererHandler=function(){var e=this;this._photoSphereRenderer.on(s.PanoImageRenderer.EVENTS.IMAGE_LOADED,function(t){e.trigger(l.EVENTS.CONTENT_LOADED,t)}),this._photoSphereRenderer.on(s.PanoImageRenderer.EVENTS.ERROR,function(t){e.trigger(l.EVENTS.ERROR,t)}),this._photoSphereRenderer.on(s.PanoImageRenderer.EVENTS.RENDERING_CONTEXT_LOST,function(t){e._deactivate(),e.trigger(l.EVENTS.ERROR,{type:l.ERROR_TYPE.RENDERING_CONTEXT_LOST,message:\"webgl rendering context lost\"})})},PanoViewer.prototype._initYawPitchControl=function(e){var t=this;this._yawPitchControl=new a.YawPitchControl(e),this._yawPitchControl.on(l.EVENTS.ANIMATION_END,function(e){t._triggerEvent(l.EVENTS.ANIMATION_END,e)}),this._yawPitchControl.on(\"change\",function(e){t._yaw=e.yaw,t._pitch=e.pitch,t._fov=e.fov,t._triggerEvent(l.EVENTS.VIEW_CHANGE,e)})},PanoViewer.prototype._triggerEvent=function(e,t){var r=t||{};return this.trigger(e,r)},PanoViewer.prototype.setUseZoom=function(e){\"boolean\"==typeof e&&this._yawPitchControl.option(\"useZoom\",e)},PanoViewer.prototype.setUseKeyboard=function(e){this._yawPitchControl.option(\"useKeyboard\",e)},PanoViewer.prototype.setUseGyro=function(e){this._yawPitchControl.option(\"useGyro\",e)},PanoViewer.prototype.setFovRange=function(e){this._yawPitchControl.option(\"fovRange\",e)},PanoViewer.prototype.getFovRange=function(){return this._yawPitchControl.option(\"fovRange\")},PanoViewer.prototype.updateViewportDimensions=function(e){this._isReady&&(this._width=e&&e.width||parseInt(window.getComputedStyle(this._container).width,10),this._height=e&&e.height||parseInt(window.getComputedStyle(this._container).height,10),this._aspectRatio=this._width/this._height,this._photoSphereRenderer.updateViewportDimensions(this._width,this._height),this._yawPitchControl.option(\"aspectRatio\",this._aspectRatio),this.lookAt({},0))},PanoViewer.prototype.getFov=function(){return this._fov},PanoViewer.prototype._getHFov=function(){return h.glMatrix.toDegree(2*Math.atan(this._aspectRatio*Math.tan(h.glMatrix.toRadian(this._fov)/2)))},PanoViewer.prototype.getYaw=function(){return this._yaw},PanoViewer.prototype.getPitch=function(){return this._pitch},PanoViewer.prototype.getYawRange=function(){return this._yawPitchControl.option(\"yawRange\")},PanoViewer.prototype.getPitchRange=function(){return this._yawPitchControl.option(\"pitchRange\")},PanoViewer.prototype.setYawRange=function(e){return this._yawPitchControl.option(\"yawRange\",e)},PanoViewer.prototype.setPitchRange=function(e){return this._yawPitchControl.option(\"pitchRange\",e)},PanoViewer.prototype.setShowPolePoint=function(e){return this._yawPitchControl.option(\"showPolePoint\",e)},PanoViewer.prototype.lookAt=function(e,t){if(this._isReady){var r=e.yaw!==undefined?e.yaw:this._yaw,n=e.pitch!==undefined?e.pitch:this._pitch,i=this._yawPitchControl.option(\"pitchRange\"),o=i[1]-i[0],a=e.fov!==undefined?e.fov:this._fov;o<a&&(a=o),this._yawPitchControl.lookAt({yaw:r,pitch:n,fov:a},t),0===t&&this._photoSphereRenderer.render(r,n,a)}},PanoViewer.prototype._activate=function(){this._photoSphereRenderer.attachTo(this._container),this._yawPitchControl.enable(),this.updateViewportDimensions(),this._isReady=!0,this._triggerEvent(l.EVENTS.READY),this._startRender()},PanoViewer.prototype._startRender=function(){this._renderLoop=this._renderLoop.bind(this),this._rafId=window.requestAnimationFrame(this._renderLoop)},PanoViewer.prototype._renderLoop=function(){this._photoSphereRenderer&&this._photoSphereRenderer.render(this._yaw,this._pitch,this._fov),this._rafId=window.requestAnimationFrame(this._renderLoop)},PanoViewer.prototype._stopRender=function(){this._rafId&&(window.cancelAnimationFrame(this._rafId),delete this._rafId)},PanoViewer.prototype._deactivate=function(){this._photoSphereRenderer&&(this._photoSphereRenderer.destroy(),this._photoSphereRenderer=null),this._isReady&&(this._yawPitchControl.disable(),this._stopRender(),this._isReady=!1)},PanoViewer.prototype.destroy=function(){this._deactivate(),this._yawPitchControl&&(this._yawPitchControl.destroy(),this._yawPitchControl=null),this._photoSphereRenderer&&(this._photoSphereRenderer.destroy(),this._photoSphereRenderer=null),this._isReady=!1},PanoViewer.isWebGLAvailable=function(){return c[\"default\"].isWebGLAvailable()},PanoViewer.isGyroSensorAvailable=function(e){if(\"DeviceMotionEvent\"in window==!1||!window.DeviceMotionEvent)return void(e&&e(!1));var t=void 0;f.race([function(){return new f(function(e,r){t=function(t){var r=null!==t.rotationRate.alpha;e(r)},window.addEventListener(\"devicemotion\",t)})}(),function(){return new f(function(e,t){setTimeout(function(){return e(!1)},1e3)})}()]).then(function(r){window.removeEventListener(\"devicemotion\",t),e&&e(r),PanoViewer.isGyroSensorAvailable=function(e){return e&&e(r),r}})},PanoViewer}(o[\"default\"]);t[\"default\"]=d,d.ERROR_TYPE=l.ERROR_TYPE,d.EVENTS=l.EVENTS,d.ProjectionType=l.PROJECTION_TYPE},function(e,t,r){\"use strict\";t.__esModule=!0,t.PanoViewer=undefined;var n=r(16),i=function(e){return e&&e.__esModule?e:{\"default\":e}}(n);t.PanoViewer=i[\"default\"]},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(0),i=_interopRequireDefault(n),o=r(10),a=_interopRequireDefault(o),s=r(11),u=_interopRequireDefault(s),c=.21,l=function(e){function SpinViewer(t,r){_classCallCheck(this,SpinViewer);var n=_possibleConstructorReturn(this,e.call(this));n._el=t;var i=r||{},s=i.colCount||1,l=i.rowCount||1;return n._scale=(i.scale||1)*c,n._frameCount=s*l,n._sprites=new u[\"default\"](t,i).on({load:function(e){n.trigger(\"load\",e)},imageError:function(e){n.trigger(\"imageError\",{imageUrl:e.imageUrl})}}),n._panInput=new o.PanInput(n._el,{scale:[n._scale,n._scale]}),n._axes=new a[\"default\"]({angle:{range:[0,359],circular:!0}}).on({change:function(e){var t=Math.floor(e.pos.angle/(360/n._frameCount)),r=n._frameCount-t-1;n._sprites.setFrameIndex(r),n.trigger(\"change\",{frameIndex:r,colRow:n._sprites.getColRow(),angle:e.pos.angle})}}),n._axes.connect(\"angle\",n._panInput),n}return _inherits(SpinViewer,e),SpinViewer.prototype.setScale=function(e){return isNaN(e)||e<0?this:(this._scale=e*c,this._panInput.options.scale=[this._scale,this._scale],this)},SpinViewer.prototype.spinBy=function(e){var t=e.angle,r=t===undefined?0:t,n=e.duration,i=n===undefined?400:n;return this._axes.setBy({angle:r},i),this},SpinViewer}(i[\"default\"]);t[\"default\"]=l},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}t.__esModule=!0,t.SpriteImage=t.SpinViewer=undefined;var n=r(18),i=_interopRequireDefault(n),o=r(11),a=_interopRequireDefault(o);t.SpinViewer=i[\"default\"],t.SpriteImage=a[\"default\"],i[\"default\"].VERSION=\"3.0.0-rc\"},function(e,t,r){\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(0),i=function(e){return e&&e.__esModule?e:{\"default\":e}}(n),o=\"undefined\"==typeof Promise?r(3).Promise:Promise,a={NONE:0,LOADING:1,LOADED:2,ERROR:3},s={READYSTATECHANGE:\"readystatechange\"},u=function(e){function ImageLoader(t){_classCallCheck(this,ImageLoader);var r=_possibleConstructorReturn(this,e.call(this));return r._image=null,r._onceHandlers=[],r._loadStatus=a.NONE,t&&r.set(t),r}return _inherits(ImageLoader,e),ImageLoader.prototype.get=function(){var e=this;return new o(function(t,r){e._image?e._loadStatus===a.LOADED?t(e.getElement()):e._loadStatus===a.LOADING?ImageLoader.isMaybeLoaded(e._image)?(e._loadStatus=a.LOADED,t(e.getElement())):e.on(s.READYSTATECHANGE,function(n){n.type===a.LOADED?t(e.getElement()):r(\"ImageLoader: failed to load images.\")}):r(\"ImageLoader: failed to load images\"):r(\"ImageLoader: image is not defiend\")})},ImageLoader.prototype.set=function(e){var t=this;if(this._loadStatus=a.LOADING,this._image=ImageLoader.createElement(e),ImageLoader.isMaybeLoaded(this._image))return void(this._loadStatus=a.LOADED);this.onceLoaded(this._image,function(){t._loadStatus=a.LOADED,t.trigger(s.READYSTATECHANGE,{type:a.LOADED})},function(){t._loadStatus=a.ERROR,t.trigger(s.READYSTATECHANGE,{type:a.ERROR})})},ImageLoader.createElement=function(e){return(e instanceof Array?e:[e]).map(function(e){var t=e;return\"string\"==typeof e&&(t=new Image,t.crossOrigin=\"anonymous\",t.src=e),t})},ImageLoader.prototype.getElement=function(){return 1===this._image.length?this._image[0]:this._image},ImageLoader.isMaybeLoaded=function(e){return e instanceof Image?e.complete&&0!==e.naturalWidth:!e.some(function(e){return!e.complete||0===e.naturalWidth})},ImageLoader.prototype.onceLoaded=function(e,t,r){var n=this,i=e instanceof Array?e:[e],a=i.filter(function(e){return!ImageLoader.isMaybeLoaded(e)}),s=a.map(function(e){return new o(function(t,r){n._once(e,\"load\",function(){return t(e)}),n._once(e,\"error\",function(){return r(e)})})});o.all(s).then(function(e){return t(1===i.length?i[0]:i)},function(e){return r(e)})},ImageLoader.prototype._once=function(e,t,r){var n=function fn(n){e.removeEventListener(t,fn),r(n)};e.addEventListener(t,n),this._onceHandlers.push({target:e,type:t,fn:n})},ImageLoader.prototype.getStatus=function(){return this._loadStatus},ImageLoader.prototype.destroy=function(){this._onceHandlers.forEach(function(e){e.target.removeEventListener(e.type,e.fn)}),this._onceHandlers=[],this._image.src=\"\",this._image=null,this._loadStatus=a.NONE},ImageLoader}(i[\"default\"]);t[\"default\"]=u,u.STATUS=a},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(0),o=_interopRequireDefault(i),a=r(20),s=_interopRequireDefault(a),u=r(22),c=_interopRequireDefault(u),l=r(5),h=_interopRequireDefault(l),f=r(25),d=_interopRequireDefault(f),p=r(26),_=_interopRequireDefault(p),m=r(1),g=r(23),v=r(13),y=\"undefined\"==typeof Promise?r(3).Promise:Promise,w=v.PROJECTION_TYPE,R=g.devicePixelRatio||1;R>2&&(R=2);var b={BIND_TEXTURE:\"bindTexture\",IMAGE_LOADED:\"imageLoaded\",ERROR:\"error\",RENDERING_CONTEXT_LOST:\"renderingContextLost\",RENDERING_CONTEXT_RESTORE:\"renderingContextRestore\"},E={INVALID_DEVICE:10,NO_WEBGL:11,FAIL_IMAGE_LOAD:12},T=function(e){function PanoImageRenderer(t,r,n,i,o,a){_classCallCheck(this,PanoImageRenderer);var s=_possibleConstructorReturn(this,e.call(this));return s.sphericalConfig=o,s.fieldOfView=o.fieldOfView,s.width=r,s.height=n,s._lastQuaternion=null,s._lastYaw=null,s._lastPitch=null,s._lastFieldOfView=null,s.pMatrix=m.mat4.create(),s.mvMatrix=m.mat4.create(),m.mat4.perspective(s.pMatrix,m.glMatrix.toRadian(s.fieldOfView),r/n,.1,100),s.textureCoordBuffer=null,s.vertexBuffer=null,s.indexBuffer=null,s.canvas=s._initCanvas(r,n),s._renderingContextAttributes=a,s._image=null,s._imageConfig=null,s._imageIsReady=!1,s._shouldForceDraw=!1,s._keepUpdate=!1,s._onContentLoad=s._onContentLoad.bind(s),s._onContentError=s._onContentError.bind(s),t&&s.setImage({image:t,imageType:o.imageType,isVideo:i,cubemapConfig:o.cubemapConfig}),s}return _inherits(PanoImageRenderer,e),PanoImageRenderer.prototype.getContent=function(){return this._image},PanoImageRenderer.prototype.setImage=function(e){var t=e.image,r=e.imageType,i=e.isVideo,o=i!==undefined&&i,a=e.cubemapConfig;return this._imageIsReady=!1,this._isVideo=o,this._imageConfig=n({order:\"RLUDBF\",tileConfig:{flipHirozontal:!1,rotation:0}},a),this._setImageType(r),this._contentLoader&&this._contentLoader.destroy(),o?(this._contentLoader=new c[\"default\"],this._keepUpdate=!0):(this._contentLoader=new s[\"default\"],this._keepUpdate=!1),this._contentLoader.set(t),this._image=this._contentLoader.getElement(),this._contentLoader.get().then(this._onContentLoad,this._onContentError)[\"catch\"](function(e){return setTimeout(function(){throw e})})},PanoImageRenderer.prototype._setImageType=function(e){e&&this._imageType!==e&&(this._imageType=e,this._isCubeMap=e===w.CUBEMAP,this._renderer=this._isCubeMap?d[\"default\"]:_[\"default\"],this._initWebGL())},PanoImageRenderer.prototype._initCanvas=function(e,t){var r=document.createElement(\"canvas\");return r.width=e,r.height=t,r.style.bottom=0,r.style.left=0,r.style.right=0,r.style.top=0,r.style.margin=\"auto\",r.style.maxHeight=\"100%\",r.style.maxWidth=\"100%\",r.style.outline=\"none\",r.style.position=\"absolute\",this._onWebglcontextlost=this._onWebglcontextlost.bind(this),this._onWebglcontextrestored=this._onWebglcontextrestored.bind(this),r.addEventListener(\"webglcontextlost\",this._onWebglcontextlost),r.addEventListener(\"webglcontextrestored\",this._onWebglcontextrestored),r},PanoImageRenderer.prototype._onContentError=function(e){return this._imageIsReady=!1,this._image=null,this.trigger(b.ERROR,{type:E.FAIL_IMAGE_LOAD,message:\"failed to load image\"}),!1},PanoImageRenderer.prototype._onContentLoad=function(e){return this._imageIsReady=!0,this.trigger(b.IMAGE_LOADED,{content:this._image,isVideo:this._isVideo,projectionType:this._imageType}),!0},PanoImageRenderer.prototype.isImageLoaded=function(){return!!this._image&&this._imageIsReady&&(!this._isVideo||this._image.readyState>=2)},PanoImageRenderer.prototype.bindTexture=function(){var e=this;return new y(function(t,r){if(!e._contentLoader)return void r(\"ImageLoader is not initialized\");e._contentLoader.get().then(function(){return e._bindTexture()},r).then(t)})},PanoImageRenderer.prototype.attachTo=function(e){this.detach(),e.appendChild(this.canvas)},PanoImageRenderer.prototype.forceContextLoss=function(){if(this.hasRenderingContext()){var e=this.context.getExtension(\"WEBGL_lose_context\");e&&e.loseContext()}},PanoImageRenderer.prototype.detach=function(){this.canvas.parentElement&&this.canvas.parentElement.removeChild(this.canvas)},PanoImageRenderer.prototype.destroy=function(){this._contentLoader&&this._contentLoader.destroy(),this.detach(),this.forceContextLoss(),this.off(),this.canvas.removeEventListener(\"webglcontextlost\",this._onWebglcontextlost),this.canvas.removeEventListener(\"webglcontextrestored\",this._onWebglcontextrestored)},PanoImageRenderer.prototype.hasRenderingContext=function(){return!(!this.context||this.context.isContextLost())&&!(this.context&&!this.context.getProgramParameter(this.shaderProgram,this.context.LINK_STATUS))},PanoImageRenderer.prototype._onWebglcontextlost=function(e){e.preventDefault(),this.trigger(b.RENDERING_CONTEXT_LOST)},PanoImageRenderer.prototype._onWebglcontextrestored=function(e){this._initWebGL(),this.trigger(b.RENDERING_CONTEXT_RESTORE)},PanoImageRenderer.prototype.updateFieldOfView=function(e){this.fieldOfView=e,this._updateViewport()},PanoImageRenderer.prototype.updateViewportDimensions=function(e,t){var r=!1;this.width=e,this.height=t;var n=e*R,i=t*R;n!==this.canvas.width&&(this.canvas.width=n,r=!0),i!==this.canvas.height&&(this.canvas.height=i,r=!0),r&&(this._updateViewport(),this._shouldForceDraw=!0)},PanoImageRenderer.prototype._updateViewport=function(){m.mat4.perspective(this.pMatrix,m.glMatrix.toRadian(this.fieldOfView),this.canvas.width/this.canvas.height,.1,100),this.context.viewport(0,0,this.context.drawingBufferWidth,this.context.drawingBufferHeight)},PanoImageRenderer.prototype._initWebGL=function(){try{if(this._initRenderingContext(),this.updateViewportDimensions(this.width,this.height),this.shaderProgram&&this.context.deleteProgram(this.shaderProgram),this.shaderProgram=this._initShaderProgram(this.context),!this.shaderProgram)throw new Error(\"Failed to intialize shaders: \"+h[\"default\"].getErrorNameFromWebGLErrorCode(this.context.getError()));this._initBuffers()}catch(t){return this.trigger(b.ERROR,{type:E.NO_WEBGL,message:\"no webgl support\"}),void this.destroy()}this.context.clearColor(0,0,0,0);var e=this._isCubeMap?this.context.TEXTURE_CUBE_MAP:this.context.TEXTURE_2D;this.texture&&this.context.deleteTexture(this.texture),this.texture=h[\"default\"].createTexture(this.context,e)},PanoImageRenderer.prototype._initRenderingContext=function(){if(!this.hasRenderingContext()){if(!window.WebGLRenderingContext)throw new Error(\"WebGLRenderingContext not available.\");if(this.context=h[\"default\"].getWebglContext(this.canvas,this._renderingContextAttributes),!this.context)throw new Error(\"Failed to acquire 3D rendering context\")}},PanoImageRenderer.prototype._initShaderProgram=function(e){var t=this._renderer.getVertexShaderSource(),r=h[\"default\"].createShader(e,e.VERTEX_SHADER,t);if(!r)return!1;var n=this._renderer.getFragmentShaderSource(),i=h[\"default\"].createShader(e,e.FRAGMENT_SHADER,n);if(!i)return!1;var o=h[\"default\"].createProgram(e,r,i);return o?(e.useProgram(o),o.vertexPositionAttribute=e.getAttribLocation(o,\"aVertexPosition\"),e.enableVertexAttribArray(o.vertexPositionAttribute),o.pMatrixUniform=e.getUniformLocation(o,\"uPMatrix\"),o.mvMatrixUniform=e.getUniformLocation(o,\"uMVMatrix\"),o.samplerUniform=e.getUniformLocation(o,\"uSampler\"),o.textureCoordAttribute=e.getAttribLocation(o,\"aTextureCoord\"),e.enableVertexAttribArray(o.textureCoordAttribute),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT),e.uniform1i(o.samplerUniform,0),o):null},PanoImageRenderer.prototype._initBuffers=function(){var e=this._renderer.getVertexPositionData(),t=this._renderer.getIndexData(),r=this._renderer.getTextureCoordData(this._imageConfig),n=this.context;this.vertexBuffer=h[\"default\"].initBuffer(n,n.ARRAY_BUFFER,new Float32Array(e),3,this.shaderProgram.vertexPositionAttribute),this.indexBuffer=h[\"default\"].initBuffer(n,n.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),1),this.textureCoordBuffer=h[\"default\"].initBuffer(n,n.ARRAY_BUFFER,new Float32Array(r),this._isCubeMap?3:2,this.shaderProgram.textureCoordAttribute)},PanoImageRenderer.prototype._bindTexture=function(){this._renderer.bindTexture(this.context,this.texture,this._image,this._imageConfig),this._shouldForceDraw=!0,this.trigger(b.BIND_TEXTURE)},PanoImageRenderer.prototype._updateTexture=function(){this._renderer.updateTexture(this.context,this._image,this._imageConfig)},PanoImageRenderer.prototype.keepUpdate=function(e){e&&!1===this.isImageLoaded()&&(this._shouldForceDraw=!0),this._keepUpdate=e},PanoImageRenderer.prototype.render=function(e,t,r){this.isImageLoaded()&&(!1===this._keepUpdate&&null!==this._lastYaw&&this._lastYaw===e&&null!==this._lastPitch&&this._lastPitch===t&&this.fieldOfView&&this.fieldOfView===r&&!1===this._shouldForceDraw||(r!==undefined&&r!==this.fieldOfView&&this.updateFieldOfView(r),m.mat4.identity(this.mvMatrix),m.mat4.rotateX(this.mvMatrix,this.mvMatrix,-m.glMatrix.toRadian(t)),m.mat4.rotateY(this.mvMatrix,this.mvMatrix,-m.glMatrix.toRadian(e-(this._isCubeMap?0:90))),this._draw(),this._lastYaw=e,this._lastPitch=t,this._shouldForceDraw&&(this._shouldForceDraw=!1)))},PanoImageRenderer.prototype._draw=function(){var e=this.context;e.uniformMatrix4fv(this.shaderProgram.pMatrixUniform,!1,this.pMatrix),e.uniformMatrix4fv(this.shaderProgram.mvMatrixUniform,!1,this.mvMatrix),this._isVideo&&this._updateTexture(),this.indexBuffer&&e.drawElements(e.TRIANGLES,this.indexBuffer.numItems,e.UNSIGNED_SHORT,0)},PanoImageRenderer}(o[\"default\"]);t[\"default\"]=T,T.EVENTS=b,T.ERROR_TYPE=E},function(e,t,r){\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}t.__esModule=!0;var n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},i=\"undefined\"==typeof Promise?r(3).Promise:Promise,o={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4,LOADING_FAILED:-1},a={};a[o.HAVE_METADATA]=\"loadedmetadata\",a[o.HAVE_CURRENT_DATA]=\"loadeddata\",a[o.HAVE_FUTURE_DATA]=\"canplay\",a[o.HAVE_ENOUGH_DATA]=\"canplaythrough\";var s=function(){function VideoLoader(e){_classCallCheck(this,VideoLoader),this._handlers=[],this._sourceCount=0,this._thresholdReadyState=o.HAVE_METADATA,this._thresholdEventName=a[this._thresholdReadyState],this._loadStatus=e&&e.readyState||o.HAVE_NOTHING,this._onerror=this._onerror.bind(this),e&&this.set(e)}return VideoLoader.prototype._onerror=function(){++this._errorCount>=this._sourceCount&&(this._loadStatus=o.LOADING_FAILED,this._detachErrorHandler(this._onerror))},VideoLoader.prototype._appendSourceElement=function(e){var t=void 0,r=void 0;if(\"object\"===(void 0===e?\"undefined\":n(e))?(t=e.src,r=e.type):\"string\"==typeof e&&(t=e),!t)return!1;var i=document.createElement(\"source\");return i.src=t,r&&(i.type=r),this._video.appendChild(i),!0},VideoLoader.prototype.set=function(e){var t=this;this._reset(),e&&(e instanceof HTMLVideoElement?this._video=e:\"string\"!=typeof e&&\"object\"!==(void 0===e?\"undefined\":n(e))||(this._video=document.createElement(\"video\"),this._video.setAttribute(\"crossorigin\",\"anonymous\"),this._video.setAttribute(\"webkit-playsinline\",\"\"),this._video.setAttribute(\"playsinline\",\"\"),e instanceof Array?e.forEach(function(e){return t._appendSourceElement(e)}):this._appendSourceElement(e)),this._video.getAttribute(\"src\")?this._sourceCount=1:this._sourceCount=this._video.querySelectorAll(\"source\").length,this._sourceCount>0?this._video.readyState<this._thresholdReadyState&&(this._video.load(),this._attachErrorHandler(this._onerror)):this._video=null)},VideoLoader.prototype._attachErrorHandler=function(e){this._video.addEventListener(\"error\",e),this._sources=this._video.querySelectorAll(\"source\"),[].forEach.call(this._sources,function(t){t.addEventListener(\"error\",e)})},VideoLoader.prototype._detachErrorHandler=function(e){this._video.removeEventListener(\"error\",e),[].forEach.call(this._sources,function(t){t.removeEventListener(\"error\",e)})},VideoLoader.prototype.get=function(){var e=this;return new i(function(t,r){if(e._video)if(e._loadStatus===o.LOADING_FAILED)r(\"VideoLoader: video source is invalid\");else if(e._video.readyState>=e._thresholdReadyState)t(e._video);else{var n=function rejector(){e._loadStatus===o.LOADING_FAILED&&(e._detachErrorHandler(rejector),r(\"VideoLoader: video source is invalid\"))};e._attachErrorHandler(n),e._once(e._thresholdEventName,function(){return t(e._video)})}else r(\"VideoLoader: video is undefined\")})},VideoLoader.prototype.getElement=function(){return this._video},VideoLoader.prototype.destroy=function(){this._reset()},VideoLoader.prototype._reset=function(){var e=this;this._handlers.forEach(function(t){e._video.removeEventListener(t.type,t.fn)}),this._handlers=[],this._video=null,this._sourceCount=0,this._errorCount=0},VideoLoader.prototype._once=function(e,t){var r=this._video,n=function fn(n){r.removeEventListener(e,fn),t(n)};r.addEventListener(e,n,!0),this._handlers.push({type:e,fn:n})},VideoLoader}();t[\"default\"]=s},function(e,t,r){\"use strict\";t.__esModule=!0;t.userAgent=window.navigator.userAgent,t.devicePixelRatio=window.devicePixelRatio},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}t.__esModule=!0,t.WebGLUtils=t.PanoImageRenderer=undefined;var n=r(21),i=_interopRequireDefault(n),o=r(5),a=_interopRequireDefault(o);t.PanoImageRenderer=i[\"default\"],t.WebGLUtils=a[\"default\"]},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(8),o=_interopRequireDefault(i),a=r(12),s=_interopRequireDefault(a),u=r(1),c=function(e){function CubeRenderer(){return _classCallCheck(this,CubeRenderer),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(CubeRenderer,e),CubeRenderer.getVertexPositionData=function(){return CubeRenderer._VERTEX_POSITION_DATA=null!==CubeRenderer._VERTEX_POSITION_DATA?CubeRenderer._VERTEX_POSITION_DATA:[1,-1,1,-1,-1,1,-1,1,1,1,1,1,-1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1,-1,1,-1,1,1,-1,1,1,1,-1,1,1,1,-1,-1,-1,-1,-1,-1,-1,1,1,-1,1,1,-1,-1,1,-1,1,1,1,1,1,1,-1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1],CubeRenderer._VERTEX_POSITION_DATA},CubeRenderer.getIndexData=function(){if(CubeRenderer._INDEX_DATA)return CubeRenderer._INDEX_DATA;for(var e=[],t=CubeRenderer.getVertexPositionData(),r=0;r<t.length/3;r+=4)e.push(r,r+2,r+1,r,r+3,r+2);return CubeRenderer._INDEX_DATA=e,e},CubeRenderer.extractTileConfig=function(e){var t=Array.isArray(e.tileConfig)?e.tileConfig:Array.apply(undefined,Array(6)).map(function(){return e.tileConfig});return t=t.map(function(e){return n({flipHorizontal:!1,rotation:0},e)})},CubeRenderer.extractOrder=function(e){return e.order||\"RLUDBF\"},CubeRenderer.getTextureCoordData=function(e){var t=CubeRenderer.extractOrder(e),r=CubeRenderer.getVertexPositionData(),n=CubeRenderer.extractTileConfig(e);return\"BFUDRL\".split(\"\").map(function(e){return n[t.indexOf(e)]}).map(function(e,t){for(var n=parseInt(e.rotation/90,10),i=e.flipHorizontal?[0,1,2,3]:[1,0,3,2],o=0;o<Math.abs(n);o++)e.flipHorizontal&&n>0||!e.flipHorizontal&&n<0?i.push(i.shift()):i.unshift(i.pop());for(var a=r.slice(12*t,12*t+12),s=[],u=0;u<4;u++)s[i[u]]=a.splice(0,3);return s}).join().split(\",\").map(function(e){return parseInt(e,10)})},CubeRenderer.getVertexShaderSource=function(){return\"\\n\\t\\t\\tattribute vec3 aVertexPosition;\\n\\t\\t\\tattribute vec3 aTextureCoord;\\n\\t\\t\\tuniform mat4 uMVMatrix;\\n\\t\\t\\tuniform mat4 uPMatrix;\\n\\t\\t\\tvarying highp vec3 vVertexDirectionVector;\\n\\t\\t\\tvoid main(void) {\\n\\t\\t\\t\\tgl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\\n\\t\\t\\t\\tvVertexDirectionVector = aTextureCoord;\\n\\t\\t\\t}\"},CubeRenderer.getFragmentShaderSource=function(){return\"\\n\\t\\t\\tvarying highp vec3 vVertexDirectionVector;\\n\\t\\t\\tuniform samplerCube uSampler;\\n\\t\\t\\tvoid main(void) {\\n\\t\\t\\t\\tgl_FragColor = textureCube(uSampler, vVertexDirectionVector);\\n\\t\\t\\t}\"},CubeRenderer.updateTexture=function(e,t,r){var n=CubeRenderer.extractOrder(r),i={};n.split(\"\").forEach(function(e,t){i[e]=t});try{if(t instanceof Array)for(var o=0;o<6;o++){var a=i[\"RLUDBF\"[o]];e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t[a])}else for(var s=CubeRenderer.getMaxCubeMapTextureSize(e,t),u=0;u<6;u++){var c=i[\"RLUDBF\"[u]],l=CubeRenderer.extractTileFromImage(t,c,s);e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+u,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,l)}}catch(h){}},CubeRenderer.bindTexture=function(e,t,r,n){e.bindTexture(e.TEXTURE_CUBE_MAP,t),CubeRenderer.updateTexture(e,r,n)},CubeRenderer.getSourceTileSize=function(e){var t=e.naturalWidth||e.videoWidth,r=e.naturalHeight||e.videoHeight,n=t/r;return n===1/6?t:6===n?r:n===2/3?t/2:t/3},CubeRenderer.extractTileFromImage=function(e,t,r){var n=e.naturalWidth||e.videoWidth,i=CubeRenderer.getSourceTileSize(e),o=document.createElement(\"canvas\");o.width=r,o.height=r;var a=o.getContext(\"2d\"),s=n/i,u=i*t%(i*s),c=parseInt(t/s,10)*i;return a.drawImage(e,u,c,i,i,0,0,r,r),o},CubeRenderer.getMaxCubeMapTextureSize=function(e,t){var r=(0,o[\"default\"])(),n=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),i=CubeRenderer.getSourceTileSize(t);if(\"ie\"===r.browser.name&&11===parseInt(r.browser.version,10)&&!u.util.isPowerOfTwo(i))for(var a=1;a<n;a*=2)if(!(a<i)){i=a;break}return\"ios\"===r.os.name&&9===parseInt(r.os.version,10)&&(i=1024),\"ios\"===r.os.name&&8===parseInt(r.os.version,10)&&(i=512),Math.min(n,i)},CubeRenderer}(s[\"default\"]);t[\"default\"]=c,c._VERTEX_POSITION_DATA=null,c._INDEX_DATA=null},function(e,t,r){\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(12),i=function(e){return e&&e.__esModule?e:{\"default\":e}}(n),o=function(e){function SphereRenderer(){return _classCallCheck(this,SphereRenderer),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(SphereRenderer,e),SphereRenderer.getVertexPositionData=function(){return null===SphereRenderer._VERTEX_POSITION_DATA&&SphereRenderer._initData(),SphereRenderer._VERTEX_POSITION_DATA},SphereRenderer.getIndexData=function(){return null===SphereRenderer._INDEX_DATA&&SphereRenderer._initData(),SphereRenderer._INDEX_DATA},SphereRenderer.getTextureCoordData=function(){return null===SphereRenderer._TEXTURE_COORD_DATA&&SphereRenderer._initData(),SphereRenderer._TEXTURE_COORD_DATA},SphereRenderer.getVertexShaderSource=function(){return\"\\n\\t\\t\\tattribute vec3 aVertexPosition;\\n\\t\\t\\tattribute vec2 aTextureCoord;\\n\\t\\t\\tuniform mat4 uMVMatrix;\\n\\t\\t\\tuniform mat4 uPMatrix;\\n\\t\\t\\tvarying highp vec2 vTextureCoord;\\n\\t\\t\\tvoid main(void) {\\n\\t\\t\\t\\tgl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\\n\\t\\t\\t\\tvTextureCoord = aTextureCoord;\\n\\t\\t\\t}\"},SphereRenderer.getFragmentShaderSource=function(){return\"\\n\\t\\t\\tvarying highp vec2 vTextureCoord;\\n\\t\\t\\tuniform sampler2D uSampler;\\n\\t\\t\\tvoid main(void) {\\n\\t\\t\\t\\tgl_FragColor = texture2D(\\n\\t\\t\\t\\t\\tuSampler,\\n\\t\\t\\t\\t\\tvec2(vTextureCoord.s, vTextureCoord.t)\\n\\t\\t\\t\\t);\\n\\t\\t\\t}\"},SphereRenderer.updateTexture=function(e,t){e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t)},SphereRenderer.bindTexture=function(e,t,r){if(r){var n=Math.max(r.width,r.height),i=e.getParameter(e.MAX_TEXTURE_SIZE);if(n>i)return void console.warn(\"Image width(\"+n+\") exceeds device limit(\"+i+\"))\");e.activeTexture(e.TEXTURE0),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.bindTexture(e.TEXTURE_2D,t),SphereRenderer.updateTexture(e,r)}},SphereRenderer._initData=function(){var e=[],t=[],r=[],n=void 0,i=void 0;for(n=0;n<=60;n++){var o=(n/60-.5)*Math.PI,a=Math.sin(o),s=Math.cos(o);for(i=0;i<=60;i++){var u=2*(i/60-.5)*Math.PI,c=Math.sin(u),l=Math.cos(u),h=l*s,f=a,d=c*s,p=i/60,_=n/60;if(e.push(p,_),t.push(2*h,2*f,2*d),60!==i&&60!==n){var m=61*n+i,g=m+60+1;r.push(m,g,m+1,g,g+1,m+1)}}}SphereRenderer._VERTEX_POSITION_DATA=t,SphereRenderer._TEXTURE_COORD_DATA=e,SphereRenderer._INDEX_DATA=r},SphereRenderer}(i[\"default\"]);t[\"default\"]=o,o._VERTEX_POSITION_DATA=null,o._TEXTURE_COORD_DATA=null,o._INDEX_DATA=null},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(0),o=_interopRequireDefault(i),a=r(10),s=_interopRequireDefault(a),u=r(6),c=r(32),l=_interopRequireDefault(c),h=r(31),f=_interopRequireDefault(h),d=r(1),p=r(7),_=[-p.YAW_RANGE_HALF,p.YAW_RANGE_HALF],m=[-p.PITCH_RANGE_HALF,p.PITCH_RANGE_HALF],g=function(e){function YawPitchControl(t){_classCallCheck(this,YawPitchControl);var r=_possibleConstructorReturn(this,e.call(this)),i=n({element:null,yaw:0,pitch:0,fov:65,showPolePoint:!1,useZoom:!0,useKeyboard:!0,useGyro:p.GYRO_MODE.YAWPITCH,touchDirection:p.TOUCH_DIRECTION_ALL,yawRange:_,pitchRange:m,fovRange:[30,110],aspectRatio:1},t);return r._element=i.element,r._initialFov=i.fov,r._enabled=!1,r._isAnimating=!1,r._initAxes(i),r.option(i),r}return _inherits(YawPitchControl,e),YawPitchControl.prototype._initAxes=function(e){var t=this,r=YawPitchControl._updateYawRange(e.yawRange,e.fov,e.aspectRatio),n=YawPitchControl._updatePitchRange(e.pitchRange,e.fov,e.showPolePoint),i=r[1]-r[0]<360?[!1,!1]:[!0,!0];this.axesPanInput=new a.PanInput(this._element),this.axesWheelInput=new l[\"default\"](this._element,{scale:4}),this.axesTiltMotionInput=u.SUPPORT_DEVICEMOTION?new f[\"default\"](this._element):null,this.axesPinchInput=u.SUPPORT_TOUCH?new a.PinchInput(this._element,{scale:-1}):null,this.axesMoveKeyInput=new a.MoveKeyInput(this._element,{scale:[-6,6]}),this.axes=new s[\"default\"]({yaw:{range:r,circular:i,bounce:[0,0]},pitch:{range:n,circular:[!1,!1],bounce:[0,0]},fov:{range:e.fovRange,circular:[!1,!1],bounce:[0,0]}},{deceleration:p.MC_DECELERATION,maximumDuration:p.MC_MAXIMUM_DURATION},{yaw:e.yaw,pitch:e.pitch,fov:e.fov}).on({hold:function(e){t.trigger(\"hold\",{isTrusted:e.isTrusted})},change:function(e){0!==e.delta.fov&&(t._setPanScale(e.pos.fov),t._updateControlScale(e)),t._triggerChange(e)},release:function(e){t._triggerChange(e)},animationStart:function(e){},animationEnd:function(e){t.trigger(\"animationEnd\",{isTrusted:e.isTrusted})}})},YawPitchControl.prototype._setPanScale=function(e){var t=parseInt((0,u.getComputedStyle)(this._element).height,10),r=p.MC_BIND_SCALE[0]*e/this._initialFov*p.PAN_SCALE/t;this.axesPanInput.options.scale=[r,r],this.axes.options.deceleration=p.MC_DECELERATION*e/p.MAX_FIELD_OF_VIEW},YawPitchControl.prototype.option=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t.length;if(0===i)return this._getOptions();if(1===i&&\"string\"==typeof t[0])return this._getOptions(t[0]);var o=n({},this.options),a={},s=[];return 1===i?(s=Object.keys(t[0]),a=n({},t[0])):i>=2&&(s.push(t[0]),a[t[0]]=t[1]),this._setOptions(this._getValidatedOptions(a)),this._applyOptions(s,o),this},YawPitchControl.prototype._getValidatedOptions=function(e){return e.yawRange&&(e.yawRange=this._getValidYawRange(e.yawRange,e.fov,e.aspectRatio)),e.pitchRange&&(e.pitchRange=this._getValidPitchRange(e.pitchRange,e.fov)),e},YawPitchControl.prototype._getOptions=function(e){var t=void 0;return\"string\"==typeof e?t=this.options[e]:0===arguments.length&&(t=this.options),t},YawPitchControl.prototype._setOptions=function(e){for(var t in e)this.options[t]=e[t]},YawPitchControl.prototype._applyOptions=function(e,t){if(e.some(function(e){return\"showPolePoint\"===e||\"fov\"===e||\"aspectRatio\"===e||\"yawRange\"===e||\"pitchRange\"===e})&&this._updateControlScale(),e.some(function(e){return\"fovRange\"===e})){var r=this.options.fovRange,n=this.axes.get().fov,i=this.axes.get().fov;d.vec2.copy(this.axes.axis.fov.range,r),i<r[0]?i=r[0]:n>r[1]&&(i=r[1]),n!==i&&(this.axes.setTo({fov:i},0),this._updateControlScale())}if(e.some(function(e){return\"useGyro\"===e})&&this.axesTiltMotionInput){var o=this.options.useGyro;o===p.GYRO_MODE.YAWPITCH?this.axes.connect([\"yaw\",\"pitch\"],this.axesTiltMotionInput):o===p.GYRO_MODE.NONE&&this.axes.disconnect(this.axesTiltMotionInput)}if(e.some(function(e){return\"useKeyboard\"===e})){this.options.useKeyboard?this.axes.connect([\"yaw\",\"pitch\"],this.axesMoveKeyInput):this.axes.disconnect(this.axesMoveKeyInput)}if(e.some(function(e){return\"useZoom\"===e})){this.options.useZoom?(this.axes.connect([\"fov\"],this.axesWheelInput),this.axesPinchInput&&this.axes.connect([\"fov\"],this.axesPinchInput)):(this.axes.disconnect(this.axesWheelInput),this.axesPinchInput&&this.axes.disconnect(this.axesPinchInput))}},YawPitchControl.prototype._getValidYawRange=function(e,t,r){var n=YawPitchControl.adjustAspectRatio(r||this.options.aspectRatio||1),i=t||this.axes.get().fov,o=i*n;return e[1]-e[0]>=o?e:this.options.yawRange||_},YawPitchControl.prototype._getValidPitchRange=function(e,t){var r=t||this.axes.get().fov;return e[1]-e[0]>=r?e:this.options.pitchRange||m},YawPitchControl.prototype._updateControlScale=function(e){var t=this.options,r=this.axes.get().fov,n=YawPitchControl._updatePitchRange(t.pitchRange,r,t.showPolePoint),i=YawPitchControl._updateYawRange(t.yawRange,r,t.aspectRatio),o=this.axes.get(),a=o.yaw,s=o.pitch;return d.vec2.copy(this.axes.axis.yaw.range,i),d.vec2.copy(this.axes.axis.pitch.range,n),this.axes.axis.yaw.circular=i[1]-i[0]<360?[!1,!1]:[!0,!0],a<i[0]?a=i[0]:a>i[1]&&(a=i[1]),s<n[0]?s=n[0]:s>n[1]&&(s=n[1]),e&&e.set({yaw:a,pitch:s}),this.axes.setTo({yaw:a,pitch:s},0),this},YawPitchControl._updatePitchRange=function(e,t,r){var n=e[1]-e[0],i=t/2,o=n<180;return r&&!o?e.map(function(e){return+e.toFixed(5)}):[e[0]+i,e[1]-i].map(function(e){return+e.toFixed(5)})},YawPitchControl._updateYawRange=function(e,t,r){var n=e[1]-e[0];if(n>=360)return e.map(function(e){return+e.toFixed(5)});var i=1,o=YawPitchControl.adjustAspectRatio(r),a=t/2*o;return n>290?i=.794:n>125&&(i=.98),[e[0]*i+a,e[1]*i-a].map(function(e){return+e.toFixed(5)})},YawPitchControl.prototype._triggerChange=function(e){var t=this.axes.get(),r=this.options,n={targetElement:r.element,isTrusted:e.isTrusted};n.yaw=t.yaw,n.pitch=t.pitch,n.fov=t.fov,this.trigger(\"change\",n)},YawPitchControl.adjustAspectRatio=function(e){for(var t=[.52,.54,.563,.57,.584,.59,.609,.67,.702,.72,.76,.78,.82,.92,.97,1,1.07,1.14,1.19,1.25,1.32,1.38,1.4,1.43,1.53,1.62,1.76,1.77,1.86,1.96,2.26,2.3,2.6,3,5,6],r=[.51,.54,.606,.56,.628,.63,.647,.71,.736,.757,.78,.77,.8,.89,.975,1,1.07,1.1,1.15,1.18,1.22,1.27,1.3,1.33,1.39,1.45,1.54,1.55,1.58,1.62,1.72,1.82,1.92,2,2.24,2.3],n=-1,i=0;i<t.length-1;i++)if(t[i]<=e&&t[i+1]>=e){n=i;break}if(-1===n)return t[0]>e?r[0]:r[r[0].length-1];var o=t[n],a=t[n+1],s=r[n],u=r[n+1];return YawPitchControl.lerp(s,u,(e-o)/(a-o))},YawPitchControl.lerp=function(e,t,r){return e+r*(t-e)},YawPitchControl.prototype.enable=function(){return this._enabled?this:(this.axes.connect([\"yaw\",\"pitch\"],this.axesPanInput),this._applyOptions(Object.keys(this.options),this.options),this._setPanScale(this.getFov()),this._enabled=!0,this)},YawPitchControl.prototype.disable=function(e){return this._enabled?(e||this._resetOrientation(),this.axes.disconnect(),this._enabled=!1,this):this},YawPitchControl.prototype._resetOrientation=function(){var e=this.options;return this.axes.setTo({yaw:e.yaw,pitch:e.pitch,fov:e.fov},0),this},YawPitchControl.prototype.lookAt=function(e,t){var r=e.yaw,n=e.pitch,i=e.fov,o=this.axes.get(),a=r===undefined?0:r-o.yaw,s=n===undefined?0:n-o.pitch,u=i===undefined?0:i-o.fov;this.axes.setBy({yaw:a,pitch:s,fov:u},t)},YawPitchControl.prototype.get=function(){return this.axes.get()},YawPitchControl.prototype.getYaw=function(){return this.axes.get().yaw},YawPitchControl.prototype.getPitch=function(){return this.axes.get().pitch},YawPitchControl.prototype.getFov=function(){return this.axes.get().fov},YawPitchControl.prototype.destroy=function(){this.axes&&this.axes.destroy(),this.axisPanInput&&this.axisPanInput.destroy(),this.axesWheelInput&&this.axesWheelInput.destroy(),this.axesTiltMotionInput&&this.axesTiltMotionInput.destroy(),this.axesPinchInput&&this.axesPinchInput.destroy(),this.axesMoveKeyInput&&this.axesMoveKeyInput.destroy()},YawPitchControl}(o[\"default\"]);g.VERSION=\"3.0.0-rc\",t[\"default\"]=g},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}t.__esModule=!0;var n=r(4),i=_interopRequireDefault(n),o=r(39),a=_interopRequireDefault(o);a[\"default\"].prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var r=new i[\"default\"].Quaternion;r.copy(this.filterQ),r.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(r),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var n=new i[\"default\"].Quaternion;n.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),n.inverse();var o=new i[\"default\"].Quaternion;o.copy(this.filterQ),o.multiply(n),this.filterQ.slerp(o,1-this.kFilter),this.previousFilterQ.copy(this.filterQ),this.isFilterQuaternionInitialized||(this.isFilterQuaternionInitialized=!0)},a[\"default\"].prototype.getOrientation=function(){return this.isFilterQuaternionInitialized?this.filterQ:null},t[\"default\"]=a[\"default\"]},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(0),i=_interopRequireDefault(n),o=r(8),a=_interopRequireDefault(o),s=r(1),u=r(6),c=function(e){function DeviceMotion(){_classCallCheck(this,DeviceMotion);var t=_possibleConstructorReturn(this,e.call(this));return t._onDeviceMotion=t._onDeviceMotion.bind(t),t._onDeviceOrientation=t._onDeviceOrientation.bind(t),t.isAndroid=\"android\"===(0,a[\"default\"])().os.name,t.stillGyroVec=s.vec3.create(),t.rawGyroVec=s.vec3.create(),t.adjustedGyroVec=s.vec3.create(),t._timer=null,t.lastDevicemotionTimestamp=0,t._isEnabled=!1,t.enable(),t}return _inherits(DeviceMotion,e),DeviceMotion.prototype._onDeviceOrientation=function(){var e=this;this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){(new Date).getTime()-e.lastDevicemotionTimestamp<200&&s.vec3.copy(e.stillGyroVec,e.rawGyroVec)},200)},DeviceMotion.prototype._onDeviceMotion=function(e){0!==e.interval&&(this.isAndroid&&(s.vec3.set(this.rawGyroVec,e.rotationRate.alpha||0,e.rotationRate.beta||0,e.rotationRate.gamma||0),s.vec3.subtract(this.adjustedGyroVec,this.rawGyroVec,this.stillGyroVec),this.lastDevicemotionTimestamp=(new Date).getTime(),e.adjustedRotationRate={alpha:this.adjustedGyroVec[0],beta:this.adjustedGyroVec[1],gamma:this.adjustedGyroVec[2]}),this.trigger(\"devicemotion\",{inputEvent:e}))},DeviceMotion.prototype.enable=function(){this.isAndroid&&u.window.addEventListener(\"deviceorientation\",this._onDeviceOrientation),u.window.addEventListener(\"devicemotion\",this._onDeviceMotion),this._isEnabled=!0},DeviceMotion.prototype.disable=function(){this.isAndroid&&u.window.removeEventListener(\"deviceorientation\",this._onDeviceOrientation),u.window.removeEventListener(\"devicemotion\",this._onDeviceMotion),this._isEnabled=!1},DeviceMotion}(i[\"default\"]);t[\"default\"]=c},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=r(0),i=_interopRequireDefault(n),o=r(40),a=_interopRequireDefault(o),s=r(4),u=_interopRequireDefault(s),c=r(9),l=_interopRequireDefault(c),h=r(6),f=r(1),d=r(29),p=_interopRequireDefault(d),_=r(28),m=_interopRequireDefault(_),g=.98,v=.04,y=function(e){function FusionPoseSensor(){_classCallCheck(this,FusionPoseSensor);var t=_possibleConstructorReturn(this,e.call(this));return t.deviceMotion=new p[\"default\"],t.accelerometer=new u[\"default\"].Vector3,t.gyroscope=new u[\"default\"].Vector3,t._onDeviceMotionChange=t._onDeviceMotionChange.bind(t),t._onScreenOrientationChange=t._onScreenOrientationChange.bind(t),t.filter=new m[\"default\"](g),t.posePredictor=new a[\"default\"](v),t.filterToWorldQ=new u[\"default\"].Quaternion,t.isFirefoxAndroid=l[\"default\"].isFirefoxAndroid(),t.isIOS=l[\"default\"].isIOS(),t._isEnabled=!1,t.isIOS?t.filterToWorldQ.setFromAxisAngle(new u[\"default\"].Vector3(1,0,0),Math.PI/2):t.filterToWorldQ.setFromAxisAngle(new u[\"default\"].Vector3(1,0,0),-Math.PI/2),t.inverseWorldToScreenQ=new u[\"default\"].Quaternion,t.worldToScreenQ=new u[\"default\"].Quaternion,t.originalPoseAdjustQ=new u[\"default\"].Quaternion,t.originalPoseAdjustQ.setFromAxisAngle(new u[\"default\"].Vector3(0,0,1),-h.window.orientation*Math.PI/180),t._setScreenTransform(),l[\"default\"].isLandscapeMode()&&t.filterToWorldQ.multiply(t.inverseWorldToScreenQ),t.resetQ=new u[\"default\"].Quaternion,t.deviceMotion.on(\"devicemotion\",t._onDeviceMotionChange),t.enable(),t}return _inherits(FusionPoseSensor,e),FusionPoseSensor.prototype.enable=function(){this.isEnabled()||(this.deviceMotion.enable(),this._isEnabled=!0,h.window.addEventListener(\"orientationchange\",this._onScreenOrientationChange))},FusionPoseSensor.prototype.disable=function(){this.isEnabled()&&(this.deviceMotion.disable(),this._isEnabled=!1,h.window.removeEventListener(\"orientationchange\",this._onScreenOrientationChange))},FusionPoseSensor.prototype.isEnabled=function(){return this._isEnabled},FusionPoseSensor.prototype.destroy=function(){this.disable(),this.deviceMotion=null},FusionPoseSensor.prototype._triggerChange=function(){var e=this.getOrientation();if(e)return this._prevOrientation?void(f.quat.equals(this._prevOrientation,e)||this.trigger(\"change\",{quaternion:e})):void(this._prevOrientation=e)},FusionPoseSensor.prototype.getOrientation=function(){var e=this.filter.getOrientation();if(!e)return null;var t=this._convertFusionToPredicted(e);return t=f.quat.fromValues(t.x,t.y,t.z,t.w),f.quat.normalize(t,t)},FusionPoseSensor.prototype._convertFusionToPredicted=function(e){this.predictedQ=this.posePredictor.getPrediction(e,this.gyroscope,this.previousTimestampS);var t=new u[\"default\"].Quaternion;return t.copy(this.filterToWorldQ),t.multiply(this.resetQ),t.multiply(this.predictedQ),t.multiply(this.worldToScreenQ),t},FusionPoseSensor.prototype._onDeviceMotionChange=function(e){var t=e.inputEvent,r=t,n=r.accelerationIncludingGravity,i=r.adjustedRotationRate||r.rotationRate,o=r.timeStamp/1e3;this.isFirefoxAndroid&&(o/=1e3),this.accelerometer.set(-n.x,-n.y,-n.z),this.gyroscope.set(i.alpha,i.beta,i.gamma),(this.isIOS||this.isFirefoxAndroid)&&this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,o),this.filter.addGyroMeasurement(this.gyroscope,o),this._triggerChange(),this.previousTimestampS=o},FusionPoseSensor.prototype._onScreenOrientationChange=function(e){this._setScreenTransform(h.window.orientation)},FusionPoseSensor.prototype._setScreenTransform=function(){switch(this.worldToScreenQ.set(0,0,0,1),h.window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new u[\"default\"].Vector3(0,0,1),-.5*Math.PI);break;case-90:this.worldToScreenQ.setFromAxisAngle(new u[\"default\"].Vector3(0,0,1),.5*Math.PI);break;case 180:this.worldToScreenQ.setFromAxisAngle(new u[\"default\"].Vector3(0,0,1),-1*Math.PI)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},FusionPoseSensor}(i[\"default\"]);t[\"default\"]=y},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function getDeltaYaw(e,t){var r=c.util.getRotationDelta(e,t,c.ROTATE_CONSTANT.YAW_DELTA_BY_YAW);return c.util.getRotationDelta(e,t,c.ROTATE_CONSTANT.YAW_DELTA_BY_ROLL)*Math.sin(c.util.extractPitchFromQuat(t))+r}function getDeltaPitch(e,t){return c.util.getRotationDelta(e,t,c.ROTATE_CONSTANT.PITCH_DELTA)}t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(0),o=_interopRequireDefault(i),a=r(14),s=r(30),u=_interopRequireDefault(s),c=r(1),l=function(e){function TiltMotionInput(t,r){_classCallCheck(this,TiltMotionInput);var i=_possibleConstructorReturn(this,e.call(this));return i.element=t,i._prevQuaternion=null,i._quaternion=null,i.fusionPoseSensor=null,i.options=n({scale:1,threshold:0},r),i._onPoseChange=i._onPoseChange.bind(i),i}return _inherits(TiltMotionInput,e),TiltMotionInput.prototype.mapAxes=function(e){this.axes=e},TiltMotionInput.prototype.connect=function(e){return this.observer?this:(this.observer=e,this.fusionPoseSensor=new u[\"default\"],this.fusionPoseSensor.enable(),this._attachEvent(),this)},TiltMotionInput.prototype.disconnect=function(){return this.observer?(this._dettachEvent(),this.fusionPoseSensor.disable(),this.fusionPoseSensor.destroy(),this.fusionPoseSensor=null,this.observer=null,this):this},TiltMotionInput.prototype.destroy=function(){this.disconnect(),this.element=null,this.options=null,this.axes=null,this._prevQuaternion=null,this._quaternion=null},TiltMotionInput.prototype._onPoseChange=function(e){if(!this._prevQuaternion)return this._prevQuaternion=c.quat.clone(e.quaternion),void(this._quaternion=c.quat.clone(e.quaternion));c.quat.copy(this._prevQuaternion,this._quaternion),c.quat.copy(this._quaternion,e.quaternion),this.observer.change(this,e,(0,a.toAxis)(this.axes,[getDeltaYaw(this._prevQuaternion,this._quaternion),getDeltaPitch(this._prevQuaternion,this._quaternion)]))},TiltMotionInput.prototype._attachEvent=function(){this.fusionPoseSensor.on(\"change\",this._onPoseChange)},TiltMotionInput.prototype._dettachEvent=function(){this.fusionPoseSensor.off(\"change\",this._onPoseChange)},TiltMotionInput}(o[\"default\"]);t[\"default\"]=l},function(e,t,r){\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(0),o=function(e){return e&&e.__esModule?e:{\"default\":e}}(i),a=r(14),s=function(e){function WheelInput(t,r){_classCallCheck(this,WheelInput);var i=_possibleConstructorReturn(this,e.call(this));return i.element=t,i.options=n({scale:1,threshold:0},r),i._onWheel=i._onWheel.bind(i),i}return _inherits(WheelInput,e),WheelInput.prototype.mapAxes=function(e){this.axes=e},WheelInput.prototype.connect=function(e){return this.observer?this:(this.observer=e,this._attachEvent(),this)},WheelInput.prototype.disconnect=function(){return this.observer?(this.observer=null,this._dettachEvent(),this):this},WheelInput.prototype.destroy=function(){this.disconnect(),this.element=null,this.options=null,this.axes=null},WheelInput.prototype._onWheel=function(e){e.preventDefault(),0!==e.deltaY&&this.observer.change(this,e,(0,a.toAxis)(this.axes,[(e.deltaY<0?-1:1)*this.options.scale]))},WheelInput.prototype._attachEvent=function(){this.element.addEventListener(\"wheel\",this._onWheel,!1)},WheelInput.prototype._dettachEvent=function(){this.element.removeEventListener(\"wheel\",this._onWheel,!1)},WheelInput}(o[\"default\"]);t[\"default\"]=s},function(e,t,r){\"use strict\";var n=r(2),i=function(e){return e&&e.__esModule?e:{\"default\":e}}(n),o={};o.create=function(){var e=new i[\"default\"].ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.rotateX=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*n,e[5]=a*i+l*n,e[6]=s*i+h*n,e[7]=u*i+f*n,e[8]=c*i-o*n,e[9]=l*i-a*n,e[10]=h*i-s*n,e[11]=f*i-u*n,e},o.rotateY=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],u=t[3],c=t[8],l=t[9],h=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*n,e[1]=a*i-l*n,e[2]=s*i-h*n,e[3]=u*i-f*n,e[8]=o*n+c*i,e[9]=a*n+l*i,e[10]=s*n+h*i,e[11]=u*n+f*i,e},o.perspective=function(e,t,r,n,i){var o=1/Math.tan(t/2),a=1/(n-i);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+n)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*n*a,e[15]=0,e},e.exports=o},function(e,t,r){\"use strict\";var n=r(2),i=function(e){return e&&e.__esModule?e:{\"default\":e}}(n),o={};o.clone=function(e){var t=new i[\"default\"].ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.fromValues=function(e,t,r,n){var o=new i[\"default\"].ARRAY_TYPE(4);return o[0]=e,o[1]=t,o[2]=r,o[3]=n,o},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.normalize=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=r*a,e[1]=n*a,e[2]=i*a,e[3]=o*a),e},o.equals=function(e,t){var r=e[0],n=e[1],o=e[2],a=e[3],s=t[0],u=t[1],c=t[2],l=t[3];return Math.abs(r-s)<=i[\"default\"].EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-u)<=i[\"default\"].EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-c)<=i[\"default\"].EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-l)<=i[\"default\"].EPSILON*Math.max(1,Math.abs(a),Math.abs(l))},e.exports=o},function(e,t,r){\"use strict\";var n=r(2),i=(function(e){e&&e.__esModule}(n),{});i.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},e.exports=i},function(e,t,r){\"use strict\";var n=r(2),i=function(e){return e&&e.__esModule?e:{\"default\":e}}(n),o={};o.create=function(){var e=new i[\"default\"].ARRAY_TYPE(3);return e[0]=0,e[1]=0,e[2]=0,e},o.fromValues=function(e,t,r){var n=new i[\"default\"].ARRAY_TYPE(3);return n[0]=e,n[1]=t,n[2]=r,n},o.set=function(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},o.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},o.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e},o.length=function(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)},o.normalize=function(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},o.cross=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],u=r[2];return e[0]=i*u-o*s,e[1]=o*a-n*u,e[2]=n*s-i*a,e},o.transformQuat=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],u=r[2],c=r[3],l=c*n+s*o-u*i,h=c*i+u*n-a*o,f=c*o+a*i-s*n,d=-a*n-s*i-u*o;return e[0]=l*c+d*-a+h*-u-f*-s,e[1]=h*c+d*-s+f*-a-l*-u,e[2]=f*c+d*-u+l*-s-h*-a,e},e.exports=o},function(e,t){function defaultSetTimout(){throw new Error(\"setTimeout has not been defined\")}function defaultClearTimeout(){throw new Error(\"clearTimeout has not been defined\")}function runTimeout(e){if(r===setTimeout)return setTimeout(e,0);if((r===defaultSetTimout||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function runClearTimeout(e){if(n===clearTimeout)return clearTimeout(e);if((n===defaultClearTimeout||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}function cleanUpNextTick(){s&&o&&(s=!1,o.length?a=o.concat(a):u=-1,a.length&&drainQueue())}function drainQueue(){if(!s){var e=runTimeout(cleanUpNextTick);s=!0;for(var t=a.length;t;){for(o=a,a=[];++u<t;)o&&o[u].run();u=-1,t=a.length}o=null,s=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var r,n,i=e.exports={};!function(){try{r=\"function\"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){r=defaultSetTimout}try{n=\"function\"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){n=defaultClearTimeout}}();var o,a=[],s=!1,u=-1;i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];a.push(new Item(e,t)),1!==a.length||s||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},i.title=\"browser\",i.browser=!0,i.env={},i.argv=[],i.version=\"\",i.versions={},i.on=noop,i.addListener=noop,i.once=noop,i.off=noop,i.removeListener=noop,i.removeAllListeners=noop,i.emit=noop,i.prependListener=noop,i.prependOnceListener=noop,i.listeners=function(e){return[]},i.binding=function(e){throw new Error(\"process.binding is not supported\")},i.cwd=function(){return\"/\"},i.chdir=function(e){throw new Error(\"process.chdir is not supported\")},i.umask=function(){return 0}},function(e,t){var r;r=function(){return this}();try{r=r||Function(\"return this\")()||(0,eval)(\"this\")}catch(n){\"object\"==typeof window&&(r=window)}e.exports=r},function(e,t,r){function ComplementaryFilter(e){this.kFilter=e,this.currentAccelMeasurement=new n,this.currentGyroMeasurement=new n,this.previousGyroMeasurement=new n,o.isIOS()?this.filterQ=new i.Quaternion(-1,0,0,1):this.filterQ=new i.Quaternion(1,0,0,1),this.previousFilterQ=new i.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new i.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new i.Vector3,this.measuredGravity=new i.Vector3,this.gyroIntegralQ=new i.Quaternion}var n=r(41),i=r(4),o=r(9);ComplementaryFilter.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)},ComplementaryFilter.prototype.addGyroMeasurement=function(e,t){this.currentGyroMeasurement.set(e,t);var r=t-this.previousGyroMeasurement.timestampS;o.isTimestampDeltaValid(r)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},ComplementaryFilter.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var r=new i.Quaternion;r.copy(this.filterQ),r.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(r),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var n=new i.Quaternion;n.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),n.inverse(),o.isDebug()&&console.log(\"Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)\",i.radToDeg*o.getQuaternionAngle(n),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var a=new i.Quaternion;a.copy(this.filterQ),a.multiply(n),this.filterQ.slerp(a,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},ComplementaryFilter.prototype.getOrientation=function(){return this.filterQ},ComplementaryFilter.prototype.accelToQuaternion_=function(e){var t=new i.Vector3;t.copy(e),t.normalize();var r=new i.Quaternion;return r.setFromUnitVectors(new i.Vector3(0,0,-1),t),r.inverse(),r},ComplementaryFilter.prototype.gyroToQuaternionDelta_=function(e,t){var r=new i.Quaternion,n=new i.Vector3;return n.copy(e),n.normalize(),r.setFromAxisAngle(n,e.length()*t),r},e.exports=ComplementaryFilter},function(e,t,r){function PosePredictor(e){this.predictionTimeS=e,this.previousQ=new n.Quaternion,this.previousTimestampS=null,this.deltaQ=new n.Quaternion,this.outQ=new n.Quaternion}var n=r(4),i=r(9);PosePredictor.prototype.getPrediction=function(e,t,r){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=r,e;var o=new n.Vector3;o.copy(t),o.normalize();var a=t.length();if(a<20*n.degToRad)return i.isDebug()&&console.log(\"Moving slowly, at %s deg/s: no prediction\",(n.radToDeg*a).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ;var s=(this.previousTimestampS,a*this.predictionTimeS);return this.deltaQ.setFromAxisAngle(o,s),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.previousTimestampS=r,this.outQ},e.exports=PosePredictor},function(e,t){function SensorSample(e,t){this.set(e,t)}SensorSample.prototype.set=function(e,t){this.sample=e,this.timestampS=t},SensorSample.prototype.copy=function(e){this.set(e.sample,e.timestampS)},e.exports=SensorSample},function(e,t,r){\"use strict\";t.__esModule=!0,t.VERSION=t.SpriteImage=t.SpinViewer=t.PanoViewer=t.YawPitchControl=undefined;var n=r(15),i=r(17),o=r(19);t.YawPitchControl=n.YawPitchControl,t.PanoViewer=i.PanoViewer,t.SpinViewer=o.SpinViewer,t.SpriteImage=o.SpriteImage,t.VERSION=\"3.0.0-rc\"}])});\n\n\n// WEBPACK FOOTER //\n// view360.min.js"],"mappings":";;;;;;;;;AAAA","sourceRoot":""}